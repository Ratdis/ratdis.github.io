<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="ratdis,ratdis1@gmail.com"><title>ä½¿ç”¨Flask-SQLAlchemyç®¡ç†æ•°æ®åº“ Â· å¢¨æŸ“çš„æ¨±èŠ±ğŸŒ¸</title><meta name="description" content="å†™åœ¨å‰é¢æƒ³äº†æƒ³ï¼Œç¬”è®°è¿™ä¸ªè¡¨è¿°è¿˜æ˜¯å¤ªè¿‡äºç¬¼ç»Ÿäº†ï¼Œå•ç‹¬æ‹å‡ºæ¥ä¹Ÿæ–¹ä¾¿æŸ¥è¯¢å¤ç›˜
è¿™é‡Œæˆ‘ä»¬åªæ˜¯æ¶‰åŠåˆ°Flask-SQLAlchemyçš„ä½¿ç”¨å±‚æ¬¡ä¸Šï¼Œæ·±å…¥çš„æ¶æ„å…³ç³»å¤„ç†æŒ‰ä¸‹ä¸è¡¨
ä»¥ä¸‹å†…å®¹å‚è€ƒFlask+Webå¼€å‘å®æˆ˜æŠ„ï¼Œæ˜¯æœ¬å¥½ä¹¦ï¼Œæ„Ÿè°¢ä½œè€…
åˆå§‹é…ç½®
å®‰è£…

1&amp;gt; pip install flask-sqlc"><meta name="keywords" content="Hexo,HTML,CSS,Android,Linux,Python"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title><a href="/">å¢¨æŸ“çš„æ¨±èŠ±ğŸŒ¸</a></h3><div class="description"><p>æˆå°±ä»Šæ—¥ å¯è¿ªæœªæ¥</p></div></div></div><ul class="social-links"><li><a href="/atom.xml"><i class="fa fa-rss"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/archives">Archive</a></li><li><a href="/links">Links</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>ä½¿ç”¨Flask-SQLAlchemyç®¡ç†æ•°æ®åº“</a></h3></div><div class="post-content"><h3 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h3><p>æƒ³äº†æƒ³ï¼Œç¬”è®°è¿™ä¸ªè¡¨è¿°è¿˜æ˜¯å¤ªè¿‡äºç¬¼ç»Ÿäº†ï¼Œå•ç‹¬æ‹å‡ºæ¥ä¹Ÿæ–¹ä¾¿æŸ¥è¯¢å¤ç›˜</p>
<p>è¿™é‡Œæˆ‘ä»¬åªæ˜¯æ¶‰åŠåˆ°Flask-SQLAlchemyçš„ä½¿ç”¨å±‚æ¬¡ä¸Šï¼Œæ·±å…¥çš„æ¶æ„å…³ç³»å¤„ç†æŒ‰ä¸‹ä¸è¡¨</p>
<p>ä»¥ä¸‹å†…å®¹å‚è€ƒFlask+Webå¼€å‘å®æˆ˜<del>æŠ„</del>ï¼Œæ˜¯æœ¬å¥½ä¹¦ï¼Œæ„Ÿè°¢ä½œè€…</p>
<h3 id="åˆå§‹é…ç½®"><a href="#åˆå§‹é…ç½®" class="headerlink" title="åˆå§‹é…ç½®"></a>åˆå§‹é…ç½®</h3><ol>
<li>å®‰è£…</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> pip install flask-sqlclchemy</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>å®ä¾‹åŒ–Flask-SQLAlchemyæä¾›çš„SQLAlchemyç±»ï¼Œä¼ å…¥ç¨‹åº å®ä¾‹appï¼Œä»¥å®Œæˆæ‰©å±•çš„åˆå§‹åŒ–:</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line">app = Flask(__name__)</span><br><span class="line">db = SQLAlchemy(app)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>è¿æ¥æ•°æ®åº“æœåŠ¡å™¨<img src="Screen Shot 2020-02-21 at 5.00.44 PM.png" alt="Screen Shot 2020-02-21 at 5.00.44 PM"></li>
</ol>
<p>é…ç½®SQLiteæ•°æ®åº“URI</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"> ...</span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_DATABASE_URI'</span>] = os.getenv(<span class="string">'DATABASE_URL'</span>, <span class="string">'sqlite:///'</span> + os.path.join(app.root_path, <span class="string">'db.sqlite3'</span>))</span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] = <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå›¾æ–¹ä¾¿ç”¨çš„å°±æ˜¯SQLiteï¼Œåªéœ€è¦æä¾›æ–‡ä»¶è·¯å¾„å³å¯[è¿™é‡Œæ˜¯appåŒè·¯å¾„ä¸‹db.sqlite3]ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ›´æ¢åˆ°å…¶ä»–ç±»å‹çš„DBMSæ—¶ï¼Œæ•°æ®åº“URLä¼šåŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œæ‰€ä»¥è¿™é‡Œä¼˜å…ˆä»ç¯å¢ƒå˜é‡DATABASE_URLè·å–ï¼Œã€æ³¨æ„ä¸åŒæ“ä½œç³»ç»Ÿä¸‹æ–œæ†æ•°ä¸ä¸€è‡´ã€‘æ‰€ä»¥ä¹Ÿå°±ç©å…·é¡¹ç›®å›¾æ–¹ä¾¿ç”¨ä¸‹ï¼Œå…¶ä»–æƒ…å†µä¸‹è¿˜æ˜¯ç”¨Mysqlç­‰æ›´ä¸“ä¸šçš„å§</p>
<p>é…ç½®Mysqlæ•°æ®åº“URI</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"> ...</span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_DATABASE_URI'</span>] = os.getenv(<span class="string">'DATABASE_URL'</span>,<span class="string">'mysql://root:password@127.0.0.1:3306/database_name'</span>)</span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] = <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<p>éœ€è¦æå‰å¼€å¯MysqlæœåŠ¡å™¨ä»¥åŠåˆ›å»ºå¥½database_name</p>
<p>å®‰è£…å¹¶åˆå§‹åŒ–Flask-SQLAlchemyåï¼Œå¯åŠ¨ç¨‹åºæ—¶ä¼šçœ‹åˆ°å‘½ä»¤è¡Œä¸‹æœ‰ä¸€è¡Œè­¦å‘Šä¿¡æ¯ã€‚è¿™æ˜¯å› ä¸ºFlask-SQLAlchemyå»ºè®®ä½ è®¾ç½®SQLALCHEMY_TRACK_MODIFICATIONS é…ç½®å˜é‡ï¼Œè¿™ä¸ªé…ç½®å˜é‡å†³å®šæ˜¯å¦è¿½è¸ªå¯¹è±¡çš„ä¿®æ”¹ï¼Œè¿™ç”¨äºFlask-SQLAlchemyçš„äº‹ ä»¶é€šçŸ¥ç³»ç»Ÿã€‚è¿™ä¸ªé…ç½®é”®çš„é»˜è®¤å€¼ä¸ºNoneï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šéœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒè®¾ä¸º Falseæ¥å…³é—­è­¦å‘Šä¿¡æ¯:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.config[<span class="string">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] = <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h3 id="å®šä¹‰æ•°æ®åº“æ¨¡å‹"><a href="#å®šä¹‰æ•°æ®åº“æ¨¡å‹" class="headerlink" title="å®šä¹‰æ•°æ®åº“æ¨¡å‹"></a>å®šä¹‰æ•°æ®åº“æ¨¡å‹</h3><p><img src="Screen Shot 2020-02-22 at 9.06.12 AM.png" alt="Screen Shot 2020-02-22 at 9.06.12 AM"></p>
<p><img src="Screen Shot 2020-02-22 at 9.12.31 AM.png" alt="Screen Shot 2020-02-22 at 9.12.31 AM">è¿™é‡Œæˆ‘å°±æ¼”ç¤ºäº†ä¸‹å‡ ä¸ªå¸¸ç”¨çš„</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"> ...</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Note</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    author = db.Column(db.String(<span class="number">25</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    created_time = db.Column(db.DateTime, default=datetime.now, nullable = <span class="literal">False</span>)</span><br><span class="line">    body = db.Column(db.Text,default=<span class="string">'Write Something'</span>)</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒFlask-SQLAlchemyä¼šæ ¹æ®æ¨¡å‹ç±»çš„åç§°ç”Ÿæˆä¸€ä¸ªè¡¨åç§°ï¼Œç”Ÿæˆè§„åˆ™å¦‚ä¸‹:</p>
<p>Message â€“&gt; message # å•ä¸ªå•è¯è½¬æ¢ä¸ºå°å†™<br> FooBar â€“&gt; foo_bar # å¤šä¸ªå•è¯è½¬æ¢ä¸ºå°å†™å¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”</p>
<p>Noteç±»å¯¹åº”çš„è¡¨åç§°å³noteã€‚å¦‚æœä½ æƒ³è‡ªå·±æŒ‡å®šè¡¨åç§°ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰ <code>__tablename__</code>å±æ€§æ¥å®ç°ã€‚</p>
<h3 id="åˆ›å»ºæ•°æ®åº“è¡¨"><a href="#åˆ›å»ºæ•°æ®åº“è¡¨" class="headerlink" title="åˆ›å»ºæ•°æ®åº“è¡¨"></a>åˆ›å»ºæ•°æ®åº“è¡¨</h3><p>å®šä¹‰å¥½æ¨¡å‹åå°±å¯ä»¥ç›´æ¥åˆ›å»ºäº†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> click</span><br><span class="line"> ...</span><br><span class="line"><span class="meta">@app.cli.command()</span></span><br><span class="line"><span class="meta">@click.option('--drop', is_flag=True, help='Create after drop.')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">initdb</span><span class="params">(drop)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> drop:</span><br><span class="line">        click.confirm(<span class="string">'This operation will delete the database, do you want to continue?'</span>, abort=<span class="literal">True</span>)</span><br><span class="line">        db.drop_all()</span><br><span class="line">        click.echo(<span class="string">'Drop tables.'</span>)</span><br><span class="line">    db.create_all()</span><br><span class="line">    click.echo(<span class="string">'Initialized database.'</span>)</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œè‡ªå®šä¹‰äº†ä¸ªflaskå‘½ä»¤<code>flask initdb</code>ï¼Œç”¨clickè¿˜æ·»åŠ äº†ä¸ª<code>--drop</code>çš„å‚æ•°</p>
<p>ä½†æ˜¯æˆ‘ä»¬è¿™é‡Œä¸ºäº†è®©æ•°æ®åº“ä¸­å®é™…çš„è¡¨åŒæ­¥æ•°æ®æ¨¡å‹çš„å˜åŒ–ã€æ·»åŠ æˆ–åˆ é™¤å­—æ®µï¼Œä¿®æ”¹å­—æ®µçš„åç§°å’Œç±»å‹ä¹‹ç±»çš„ã€‘æ˜¯ç›´æ¥æš´åŠ›çš„db.drop_all()åå†é‡æ–°db.create_all()ï¼Œä¼šç›´æ¥æ¸…ç©ºè¡¨ä¸­åŸæœ‰çš„æ•°æ®ï¼Œè¿ç§»è¡¨åŸæœ‰æ•°æ®åæ–‡ä¸­å†™</p>
<h3 id="æ•°æ®åº“æ“ä½œ"><a href="#æ•°æ®åº“æ“ä½œ" class="headerlink" title="æ•°æ®åº“æ“ä½œ"></a>æ•°æ®åº“æ“ä½œ</h3><p>ä¸ºäº†æ–¹ä¾¿ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨flask shellè¿›è¡Œæ¼”ç¤ºï¼Œåœ¨æ­¤ä¹‹å‰æˆ‘ä»¬å…ˆå°†è‡ªå·±å®šä¹‰çš„æ•°æ®åº“æ¨¡å‹ç±»ä»¥åŠdbæ‰‹åŠ¨ä¼ å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¼ å…¥shellä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="meta">@app.shell_context_processor</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_shell_context</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> dict(db=db, Note=Note)</span><br></pre></td></tr></table></figure>
<p>ç»ˆç«¯è¿›å…¥é¡¹ç›®æ‰€åœ¨è·¯å¾„æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> flask initdb --drop</span><br><span class="line">This operation will delete the database, do you want to continue? [y/N]: y</span><br><span class="line">Drop tables.</span><br><span class="line">Initialized database.</span><br><span class="line"><span class="meta">&gt;</span> flask shell</span><br><span class="line">Python 3.7.5 (default, Nov 29 2019, 17:17:51) </span><br><span class="line">[Clang 11.0.0 (clang-1100.0.20.17)] on darwin</span><br><span class="line">App: app [production]</span><br><span class="line">Instance: /Users/Mosaic/Programming/Flask/instance</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt;</span><br></pre></td></tr></table></figure>
<p>ç”¨ä¸Šä¸€å°èŠ‚çš„å‘½ä»¤<code>flask initdb --drop</code>æˆ‘ä»¬å…ˆåŒæ­¥å¥½äº†æ¨¡å‹è¡¨ï¼Œç„¶åè¿›å…¥<code>flask shell</code></p>
<p>ã€<strong>ä¸‹æ–‡ä¸­<code>&gt;&gt;&gt;</code>å¼€å¤´çš„éƒ½ä»£è¡¨æ˜¯åœ¨flask shellæ¨¡å¼ä¸­</strong>ã€‘</p>
<p>å¢åˆ æ”¹æŸ¥</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>note1 = Note(body=<span class="string">'hello'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>note2 = Note(body=<span class="string">'world'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.add(note1) <span class="comment"># å¢</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.add(note2)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.commit() <span class="comment"># æ¯æ¬¡æ›´æ”¹éƒ½è¦commitæ‰èƒ½åŒæ­¥åˆ°æ•°æ®åº“</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.delete(note1) <span class="comment"># åˆ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.commit()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>note1.body = <span class="string">'giao!'</span> <span class="comment"># æ”¹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.commit()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Note.query.filter_by(body=<span class="string">'giao!'</span>).first() == note1 <span class="comment"># æŸ¥</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªå®Œæ•´çš„æŸ¥è¯¢éµå¾ªä¸‹é¢çš„æ¨¡å¼: &lt;æ¨¡å‹ç±»&gt;.query.&lt;è¿‡æ»¤æ–¹æ³•&gt;.&lt;æŸ¥è¯¢æ–¹æ³•&gt;<img src="Screen Shot 2020-02-22 at 10.53.04 AM.png" alt="Screen Shot 2020-02-22 at 10.53.04 AM"></p>
<p><img src="Screen Shot 2020-02-22 at 10.53.27 AM.png" alt="Screen Shot 2020-02-22 at 10.53.27 AM"></p>
<p>å’Œfilter()æ–¹æ³•ç›¸æ¯”ï¼Œfilter_by()æ–¹æ³•æ›´æ˜“äºä½¿ç”¨ã€‚åœ¨filter_by() æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨å…³é”®å­—è¡¨è¾¾å¼æ¥æŒ‡å®šè¿‡æ»¤è§„åˆ™ã€‚æ›´æ–¹ä¾¿çš„æ˜¯ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªè¿‡ æ»¤å™¨ä¸­ç›´æ¥ä½¿ç”¨å­—æ®µåç§°ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨filter_by()è¿‡æ»¤å™¨å®Œæˆäº†åŒæ ·çš„ä»»åŠ¡:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Note.query.filter_by(body=<span class="string">'SHAVE'</span>).first()</span><br><span class="line"><span class="comment"># ç­‰ä»·äº Note.query.filter(Note.body='SHAVE').first()</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä»–çš„ä¸ä¸€ä¸€ä¸¾ä¾‹äº†</p>
<h3 id="å»ºç«‹æ¨¡å‹ä¹‹é—´å‡ ç§åŸºç¡€çš„å…³ç³»æ¨¡å¼"><a href="#å»ºç«‹æ¨¡å‹ä¹‹é—´å‡ ç§åŸºç¡€çš„å…³ç³»æ¨¡å¼" class="headerlink" title="å»ºç«‹æ¨¡å‹ä¹‹é—´å‡ ç§åŸºç¡€çš„å…³ç³»æ¨¡å¼"></a>å»ºç«‹æ¨¡å‹ä¹‹é—´å‡ ç§åŸºç¡€çš„å…³ç³»æ¨¡å¼</h3><p>æœ¬æ¥åªæ˜¯æƒ³æ€»ç»“ä¸‹è¿™ä¸ªçŸ¥è¯†ç‚¹çš„â€¦æƒ³æƒ³ç®—äº†ï¼Œè¿˜æ˜¯å†™å®Œæ•´ç‚¹å§</p>
<p>ï¼ˆ1ï¼‰å•å‘å’ŒåŒå‘å…³ç³»</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Writer</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">70</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    books = db.relationship(<span class="string">'Book'</span>, back_populates=<span class="string">'writer'</span>)</span><br><span class="line">    <span class="comment"># books = db.relationship('Book')</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">50</span>), index=<span class="literal">True</span>)</span><br><span class="line">    writer_id = db.Column(db.Integer, db.ForeignKey(<span class="string">'writer.id'</span>)) </span><br><span class="line">    writer = db.relationship(<span class="string">'Writer'</span>, back_populates=<span class="string">'books'</span>)</span><br><span class="line">    <span class="comment"># writer = db.relationship('Writer')</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ¨¡å‹ï¼Œéƒ½å®šä¹‰äº†db.relationship</p>
<p>relationship()å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå…³ç³»å¦ä¸€ä¾§çš„æ¨¡å‹åç§°ï¼Œåœ¨Writerä¸­å®ƒä¼šå‘Šè¯‰ SQLAlchemyå°†Writerç±»ä¸Bookç±»å»ºç«‹å…³ç³»</p>
<p>å¦‚æœdb.relationshipåªè¢«å®šä¹‰åœ¨Writerä¸­ï¼Œè€ŒBookä¸­æ²¡æœ‰ï¼Œå°±å«å•å‘å…³ç³»ã€åªèƒ½ä»WriteræŸ¥è¯¢åˆ°booksï¼Œä¸èƒ½ä»Bookæ–¹å‘æŸ¥è¯¢è‡ªå·±çš„Writerã€‘ï¼Œä¸¤è¾¹éƒ½æœ‰å°±æ˜¯åŒå‘å…³ç³»ã€åŒæ–¹å¯ä»¥äº’æŸ¥ã€‘</p>
<p>è€Œback_populateså‚æ•°æ˜¯ç”¨æ¥è¿æ¥ä¸¤è¾¹çš„relationshipçš„ï¼Œå€¼ä¸ºå¯¹é¢å…³ç³»åå­—ï¼Œä»è€Œå®ç°<strong>æœªcommitä¹‹å‰</strong>ä¸¤è¾¹å…³ç³»çš„åŒæ­¥ã€ä¾‹å¦‚åˆ æ‰äº†Writer Açš„Book Bï¼ŒBook Bçš„Writer Aä¹Ÿä¼šè¢«åŒæ­¥åˆ é™¤ã€‘ï¼Œä½†æ˜¯ä¸ç®¡åŠ æ²¡åŠ back_populateså‚æ•°ï¼Œcommitä¹‹åä¸¤è¾¹å…³ç³»æ€»ä¼šåŒæ­¥å¥½çš„ã€ä¹‹æ‰€ä»¥åŠ é‡<code>æœªcommitä¹‹å‰</code>æ˜¯å› ä¸ºè‡ªå·±ä¸€ä¸ªä¸ªæµ‹è¯•å‡ºæ¥çš„â€¦å½“åˆå¯¹back_populatesè¿™ä¸ªå‚æ•°æœ‰ç‚¹ç–‘æƒ‘<del>å‘</del>ï¼Œæ¶‰åŠåˆ°äº†åé¢çš„çº§è”ã€‘</p>
<p>å…¶ä»–å‚æ•°å¦‚ä¸‹ï¼Œä¸ä¸€ä¸€ä¸¾ä¾‹äº†ï¼Œbackrefæ˜¯éšå¼åŒå‘ï¼Œä¸æ¨èï¼Œuselistå¯ä»¥ç”¨åœ¨ä¸€å¯¹ä¸€å…³ç³»ä¸­ï¼Œsecondaryç”¨åœ¨å¤šå¯¹å¤šå…³ç³»ä¸­</p>
<p><img src="Screen Shot 2020-02-22 at 4.54.13 PM.png" alt="Screen Shot 2020-02-22 at 4.54.13 PM"></p>
<p>ã€ä¸‹é¢å‡ ç§å…³ç³»éƒ½é»˜è®¤ä½¿ç”¨åŒå‘å…³ç³»ã€‘</p>
<p>ï¼ˆ2ï¼‰ä¸€å¯¹å¤š/å¤šå¯¹ä¸€</p>
<p>å®šä¹‰å…³ç³»çš„ç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºå¤–é”®ã€‚å¤–é”®æ˜¯(foreign key)ç”¨æ¥åœ¨Aè¡¨å­˜å‚¨Bè¡¨çš„ä¸»é”®å€¼ä»¥ä¾¿å’ŒBè¡¨å»ºç«‹è”ç³»çš„å…³ç³»å­—æ®µã€‚å› ä¸ºå¤–é”®åªèƒ½å­˜å‚¨å•ä¸€æ•°æ®(æ ‡é‡)ï¼Œæ‰€ä»¥<strong>å¤–é”®æ€»æ˜¯åœ¨â€œå¤šâ€è¿™ä¸€ä¾§å®šä¹‰</strong>ï¼Œå¤šæœ¬ä¹¦å±äºåŒä¸€ä¸ªä½œè€…ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸ºæ¯æœ¬ä¹¦æ·»åŠ å¤–é”®å­˜å‚¨ä½œè€…çš„ä¸»é”®å€¼ä»¥æŒ‡å‘å¯¹åº”çš„ä½œè€…ã€‚åœ¨Bookæ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ ä¸ªwriter_idå­—æ®µä½œä¸ºå¤–é”®:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">  ...</span><br><span class="line">writer_id = db.Column(db.Integer, db.ForeignKey(<span class="string">'writer.id'</span>))</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå­—æ®µä½¿ç”¨db.ForeignKeyç±»å®šä¹‰ä¸ºå¤–é”®ï¼Œä¼ å…¥å…³ç³»å¦ä¸€ä¾§çš„è¡¨åå’Œä¸»é”®å­—æ®µåï¼Œå³writer.idã€‚å®é™…çš„æ•ˆæœæ˜¯å°†bookè¡¨çš„writer_idçš„å€¼é™åˆ¶ä¸ºWriterè¡¨çš„idåˆ—çš„å€¼ã€‚å®ƒå°†ç”¨æ¥å­˜å‚¨Writerè¡¨ä¸­è®°å½•çš„ä¸»é”®å€¼</p>
<p>å†åŠ ä¸ŠåŒå‘å…³ç³»ï¼Œä¸€ä¸ªä¸€å¯¹å¤š/å¤šå¯¹ä¸€å°±å®Œæˆäº†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Writer</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">70</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    books = db.relationship(<span class="string">'Book'</span>, back_populates=<span class="string">'writer'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">50</span>), index=<span class="literal">True</span>)</span><br><span class="line">    writer_id = db.Column(db.Integer, db.ForeignKey(<span class="string">'writer.id'</span>)) </span><br><span class="line">    writer = db.relationship(<span class="string">'Writer'</span>, back_populates=<span class="string">'books'</span>)</span><br></pre></td></tr></table></figure>
<p>å½“WriteræŸ¥è¯¢booksæ—¶ï¼Œä¼šè¿”å›æ‰€æœ‰Book.writer_idä¸Writer.idä¸€è‡´çš„Bookã€è¿”å›åˆ—è¡¨ã€‘</p>
<p>è€Œå½“BookæŸ¥è¯¢Writeræ—¶ï¼Œä¼šè¿”å›Writer.idä¸writer_idä¸€è‡´çš„Writerã€è¿”å›å•ä¸ªå€¼ã€‘</p>
<p>ï¼ˆ3ï¼‰ä¸€å¯¹ä¸€</p>
<p>ä¸€å¯¹ä¸€å°±æ˜¯å†ä¸€å¯¹å¤š/å¤šå¯¹ä¸€çš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†ä¸ªå‚æ•°ï¼Œä¸‹é¢å‡è®¾ä¸€ä¸ªä½œè€…ä¸€ç”Ÿåªå†™ä¸€æœ¬ä¹¦ï¼Œä¸€æœ¬ä¹¦ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªä½œè€…</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Writer</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">70</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    book = db.relationship(<span class="string">'Book'</span>, back_populates=<span class="string">'writer'</span>, uselist=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">50</span>), index=<span class="literal">True</span>)</span><br><span class="line">    writer_id = db.Column(db.Integer, db.ForeignKey(<span class="string">'writer.id'</span>)) </span><br><span class="line">    writer = db.relationship(<span class="string">'Writer'</span>, back_populates=<span class="string">'books'</span>)</span><br></pre></td></tr></table></figure>
<p>åœ¨Writerçš„relationshipåŠ ä¸Šäº†uselist=Falseï¼Œè¿™å°†è¡¨ç¤ºåªèƒ½è¿”å›å•ä¸ªå€¼äº†</p>
<p>ï¼ˆ4ï¼‰å¤šå¯¹å¤š</p>
<p>éœ€è¦é¢å¤–å®šä¹‰ä¸€ä¸ªè¡¨æ¥å¤„ç†ä¸¤è¾¹çš„å¤–é”®å¯¹åº”å…³ç³»</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">association_table = db.Table(<span class="string">'association'</span>,db.Column(<span class="string">'student_id'</span>, db.Integer, db.ForeignKey(<span class="string">'student.id'</span>)),db.Column(<span class="string">'teacher_id'</span>, db.Integer, db.ForeignKey(<span class="string">'teacher.id'</span>))</span><br><span class="line">)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>) </span><br><span class="line">    name = db.Column(db.String(<span class="number">70</span>), unique=<span class="literal">True</span>) </span><br><span class="line">    grade = db.Column(db.String(<span class="number">20</span>))</span><br><span class="line">    teachers = db.relationship(<span class="string">'Teacher'</span>,</span><br><span class="line">    secondary=association_table, back_populates=<span class="string">'students'</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>) </span><br><span class="line">    name = db.Column(db.String(<span class="number">70</span>), unique=<span class="literal">True</span>) </span><br><span class="line">    office = db.Column(db.String(<span class="number">20</span>))</span><br></pre></td></tr></table></figure>
<p><img src="Screen Shot 2020-02-22 at 5.43.28 PM.png" alt="Screen Shot 2020-02-22 at 5.43.28 PM"></p>
<h3 id="è¿ç§»æ•°æ®åº“"><a href="#è¿ç§»æ•°æ®åº“" class="headerlink" title="è¿ç§»æ•°æ®åº“"></a>è¿ç§»æ•°æ®åº“</h3><p>æˆ‘ä»¬ä½¿ç”¨Flask-Migrateæ¥å®ç°ä¿ç•™æ•°æ®æ›´æ”¹è¡¨</p>
<p>1.å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> pip install flask-migrate</span><br></pre></td></tr></table></figure>
<p>2.å®ä¾‹åŒ–</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"><span class="keyword">from</span> flask_migrate <span class="keyword">import</span> Migrate</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"> ...</span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line">migrate = Migrate(app, db) <span class="comment"># åœ¨dbå¯¹è±¡åˆ›å»ºåè°ƒç”¨</span></span><br></pre></td></tr></table></figure>
<p>3.åˆ›å»ºè¿ç§»ç¯å¢ƒ</p>
<p>åœ¨å¼€å§‹è¿ç§»æ•°æ®ä¹‹å‰ï¼Œéœ€è¦å…ˆä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ªè¿ç§»ç¯å¢ƒ:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> flask db init</span><br></pre></td></tr></table></figure>
<p>4.ç”Ÿæˆè¿ç§»è„šæœ¬</p>
<p>ä½¿ç”¨migrateå­å‘½ä»¤å¯ä»¥è‡ªåŠ¨ç”Ÿæˆè¿ç§»è„šæœ¬:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> flask db migrate -m "add note timestamp"</span><br><span class="line">    ...</span><br><span class="line">INFO [alembic.autogenerate.compare] Detected added column 'message.timestamp</span><br><span class="line">Generating /Path/to/your/database/migrations/versions/c52a02014635_add note_timestamp.py ... done</span><br></pre></td></tr></table></figure>
<p>è¿™æ¡å‘½ä»¤å¯ä»¥ç®€å•ç†è§£ä¸ºåœ¨flaské‡Œå¯¹æ•°æ®åº“(db)è¿›è¡Œè¿ç§»(migrate)ã€‚</p>
<p>-m é€‰é¡¹ç”¨æ¥æ·»åŠ è¿ç§»å¤‡æ³¨ä¿¡æ¯ã€‚</p>
<p>ä»ä¸Šé¢çš„è¾“å‡ºä¿¡æ¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒAlembicæ£€æµ‹å‡ºäº† æ¨¡å‹çš„å˜åŒ–:è¡¨noteæ–°æ·»åŠ äº†ä¸€ä¸ªtimestampåˆ—ï¼Œå¹¶ä¸”ç›¸åº”ç”Ÿæˆäº†ä¸€ä¸ªè¿ç§»è„šæœ¬ c52a02014635_add_note_timestamp.py</p>
<p>ã€è¿ç§»å‘½ä»¤æ˜¯ç”±Alembicè‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é”™è¯¯ï¼Œæ‰€ä»¥æœ‰å¿…è¦åœ¨ç”Ÿæˆåæ£€æŸ¥ä¸€ä¸‹ã€‚ã€‘</p>
<p>å› ä¸ºæ¯ä¸€æ¬¡è¿ç§»éƒ½ä¼šç”Ÿæˆæ–°çš„è¿ç§»è„šæœ¬ï¼Œè€Œä¸”Alembicä¸ºæ¯ä¸€æ¬¡è¿ç§»éƒ½ç”Ÿæˆäº†ä¿®è®¢ç‰ˆæœ¬(revision)IDï¼Œæ‰€ä»¥æ•°æ®åº“å¯ä»¥æ¢å¤åˆ°ä¿®æ”¹å†å²ä¸­çš„ä»»ä¸€ç‚¹ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œè¿ç§»ç¯å¢ƒä¸­çš„æ–‡ä»¶ä¹Ÿè¦çº³å…¥ç‰ˆæœ¬æ§åˆ¶ã€‚</p>
<p>æœ‰äº›å¤æ‚çš„æ“ä½œæ— æ³•å®ç°è‡ªåŠ¨è¿ç§»ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨revisionå‘½ä»¤æ‰‹åŠ¨åˆ›å»ºè¿ç§»è„šæœ¬ã€‚è¿™åŒæ ·ä¼šç”Ÿæˆä¸€ä¸ªè¿ç§»è„šæœ¬ï¼Œä¸è¿‡è„šæœ¬ä¸­çš„upgrade()å’Œdowngrade()å‡½æ•°éƒ½æ˜¯ç©ºçš„ã€‚ä½ éœ€è¦ä½¿ç”¨Alembicæä¾›çš„Operationså¯¹è±¡æŒ‡ä»¤åœ¨è¿™ä¸¤ä¸ªå‡½æ•°ä¸­å®ç°å…·ä½“æ“ä½œï¼Œå…·ä½“å¯ä»¥è®¿é—®Alembicå®˜æ–¹æ–‡æ¡£æŸ¥çœ‹ã€‚</p>
<p>5.æ›´æ–°æ•°æ®åº“</p>
<p>ç”Ÿæˆäº†è¿ç§»è„šæœ¬åï¼Œä½¿ç”¨upgradeå­å‘½ä»¤å³å¯æ›´æ–°æ•°æ®åº“:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> flask db upgrade</span><br><span class="line"> ...</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade -&gt; c52a02014635, add note timestamp</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¿˜æ²¡æœ‰åˆ›å»ºæ•°æ®åº“å’Œè¡¨ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨åˆ›å»ºï¼›å¦‚æœå·²ç»åˆ›å»ºï¼Œåˆ™ä¼šåœ¨ä¸ æŸåæ•°æ®çš„å‰æä¸‹æ‰§è¡Œæ›´æ–°ã€‚</p>
<p>å¦‚æœä½ æƒ³å›æ»šè¿ç§»ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨downgradeå‘½ä»¤(é™çº§)ï¼Œå®ƒä¼šæ’¤é”€æœ€åä¸€ æ¬¡è¿ç§»åœ¨æ•°æ®åº“ä¸­çš„æ”¹åŠ¨ï¼Œè¿™åœ¨å¼€å‘æ—¶éå¸¸æœ‰ç”¨ã€‚æ¯”å¦‚ï¼Œå½“ä½ æ‰§è¡Œupgradeå‘½ä»¤å,å‘ç°æŸäº›åœ°æ–¹å‡ºé”™äº†ï¼Œè¿™æ—¶å°±å¯ä»¥æ‰§è¡Œflask db downgradeå‘½ä»¤è¿›è¡Œå›æ»šï¼Œåˆ é™¤å¯¹åº”çš„è¿ç§»è„šæœ¬ï¼Œé‡æ–°ç”Ÿæˆè¿ç§»è„šæœ¬åå†è¿›è¡Œæ›´æ–°(upgrade)ã€‚</p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è¿˜æœ‰ä¸€äº›ä»€ä¹ˆçº§è”æ“ä½œï¼Œäº‹ä»¶ç›‘å¬ä¹‹ç±»çš„æ²¡æœ‰æåˆ°â€¦â€¦</p>
<p>è‡³å°‘ä»Šå¤©ä¸æƒ³å†™äº†ï¼Œå†™ç¬”è®°çš„æ—¶é—´æ¯”å­¦ä¹ å†…å®¹æ—¶é—´éƒ½è¦å¤šæ˜¯å¥½äº‹è¿˜æ˜¯åäº‹ï¼Œemmmmmï¼Œä¸è¿‡æ€è·¯è¿˜æ˜¯æ¸…æ™°äº†ï¼Œç®¡ä»–å‘¢~ </p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2020-02-22</span><i class="fa fa-comment-o"></i><a href="/2020/02/22/use-Flask-SQLAlchemy-database management/#comments">Comments</a><i class="fa fa-tag"></i><a class="tag" href="/categories/Note/" title="Note">Note </a><a class="tag" href="/tags/Python/" title="Python">Python </a><a class="tag" href="/tags/Flask/" title="Flask">Flask </a><a class="tag" href="/tags/DataBase/" title="DataBase">DataBase </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,https://ratdis.github.io/2020/02/22/use-Flask-SQLAlchemy-database management/,å¢¨æŸ“çš„æ¨±èŠ±ğŸŒ¸,ä½¿ç”¨Flask-SQLAlchemyç®¡ç†æ•°æ®åº“,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/2019/11/29/Python-virtual-environment-hodgepodge/" title="Pythonè™šæ‹Ÿç¯å¢ƒå¤§æ‚çƒ©">next_post</a></li></ul></div><a id="comments"></a><div id="disqus_thread"></div><script>var disqus_shortname = 'ratdis';
var disqus_identifier = '2020/02/22/use-Flask-SQLAlchemy-database management/';
var disqus_title = 'ä½¿ç”¨Flask-SQLAlchemyç®¡ç†æ•°æ®åº“';
var disqus_url = 'https://ratdis.github.io/2020/02/22/use-Flask-SQLAlchemy-database management/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/baidu-statistical.js"></script></body></html>