<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å¢¨æŸ“çš„æ¨±èŠ±ğŸŒ¸</title>
  
  <subtitle>æˆå°±ä»Šæ—¥ å¯è¿ªæœªæ¥</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://ratdis.github.io/"/>
  <updated>2019-04-07T14:27:18.389Z</updated>
  <id>https://ratdis.github.io/</id>
  
  <author>
    <name>Ratdis</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Sony Xperia XZ1(G8342)å¼ºåˆ·ç¬”è®°</title>
    <link href="https://ratdis.github.io/2019/04/07/sony-xz1-flash-note/"/>
    <id>https://ratdis.github.io/2019/04/07/sony-xz1-flash-note/</id>
    <published>2019-04-07T02:26:50.000Z</published>
    <updated>2019-04-07T14:27:18.389Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸æ˜¯åŒå‹å·æˆ–è€…æ˜¯ç´¢å°¼æ‰‹æœºçš„ï¼Œæœ¬æ–‡å¹¶æ²¡æœ‰å•¥å‚è€ƒä»·å€¼çš„è¯´<del>æ°´</del></p></blockquote><h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>ç”±äº2700mAh<strong>è¶…å¤§</strong>ç”µæ± è€Œä¸”æ— rootçš„XZ1åœ¨å„ç±»æµæ°“é¢å‰ä¸å ªä¸€å‡»ï¼Œä¸ºäº†æ‘†è„±ä¸€æ—¥äºŒå……çš„å¤„å¢ƒï¼Œratdisåªå¾—è§£é”rootäº†â€¦å¸¦æ¥çš„å°±æ˜¯æ— æ³•ä¿ä¿®å’Œæ²¡äº†OTAæ›´æ–°ï¼Œä¸”ä¸ºäº†åŠæ—¶æ‰“ä¸Šå®‰å…¨è¡¥ä¸ä¸å¾—ä¸éš”ä¸ªæœˆå°±å¾—åˆ·ä¸ªæœºâ€¦</p><p>ä½†æ˜¯ç–äºè®°å½•â€¦æ¯æ¬¡åˆ·éƒ½ä¼šæµªè´¹å¾ˆå¤šæ—¶é—´ï¼Œé‚£å°±ç®€å•å†™ä¸‹å§</p><p>å“¦ï¼Œå¯¹äº†æˆ‘ä¹‹å‰å·²ç»è§£é”äº†BLé”äº†ï¼Œè¿™é‡Œå°±çœäº†</p><h2 id="åˆ·æœºä¹‹å‰"><a href="#åˆ·æœºä¹‹å‰" class="headerlink" title="åˆ·æœºä¹‹å‰"></a>åˆ·æœºä¹‹å‰</h2><p>å¤‡ä»½ä»¥åŠåˆ·æœºåçš„æ“ä½œä¹‹å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡ï¼Œå¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨ <a href="https://www.ratdis1.com/2018/11/18/android-backup-and-management/" target="_blank" rel="noopener">Link</a></p><p><strong>è®°å¾—æå‰é€€å‡ºè°·æ­Œè´¦å·</strong></p><h2 id="ä¸€å †ç”¨çš„ç€çš„æ•£ä¸œè¥¿"><a href="#ä¸€å †ç”¨çš„ç€çš„æ•£ä¸œè¥¿" class="headerlink" title="ä¸€å †ç”¨çš„ç€çš„æ•£ä¸œè¥¿"></a>ä¸€å †ç”¨çš„ç€çš„æ•£ä¸œè¥¿</h2><p>ä»¥ä¸‹çš„è¿æ¥éƒ½æ˜¯ç»™çš„æ›´æ–°é¡µï¼Œæ‰€ä»¥å°±ä¸ç”¨æ‹…å¿ƒæ—§ç‰ˆæœ¬ä»€ä¹ˆçš„é—®é¢˜äº†</p><ul><li><a href="https://xpericheck.com/" target="_blank" rel="noopener">XperiCheck</a>     å¾ˆæ–¹ä¾¿çš„æŸ¥çœ‹å„åŒºåŸŸçš„å›ºä»¶æ›´æ–°æƒ…å†µ</li><li><a href="https://forum.xda-developers.com/crossdevice-dev/sony/pc-xperifirm-xperia-firmware-downloader-t2834142" target="_blank" rel="noopener">XperiFirm</a>        ä¸‹è½½å›ºä»¶ç”¨çš„</li><li><a href="http://www.flashtool.net/downloads.php" target="_blank" rel="noopener">Flashtool</a>             æˆ‘åªæ˜¯ç”¨æ¥å®‰è£…é©±åŠ¨äº†</li><li><a href="https://forum.xda-developers.com/crossdevice-dev/sony/progress-newflasher-xperia-command-line-t3619426" target="_blank" rel="noopener">Newflasher</a>          å¼ºåˆ·å‘½ä»¤è¡Œå·¥å…·</li><li><a href="https://forum.xda-developers.com/xperia-xz1/development/recovery-twrp-3-2-1-t3727602/page12" target="_blank" rel="noopener">TWRP</a>                  RECOVERY</li><li><a href="https://github.com/topjohnwu/Magisk/releases" target="_blank" rel="noopener">Magisk</a>                 rootæƒé™ç®¡ç†</li><li><a href="https://github.com/shadowsocks/shadowsocks-android/releases" target="_blank" rel="noopener">Shadowsocks</a>      ä¸Šäº’è”ç½‘æ¢å¤å¤‡ä»½</li><li><a href="https://androidmtk.com/download-minimal-adb-and-fastboot-tool" target="_blank" rel="noopener">Minimal ADB and Fastboot</a>       =ã€‚=</li><li><a href="https://github.com/ElderDrivers/EdXposed" target="_blank" rel="noopener">EdXposed</a>            å®‰å“9ä¸Šä¹Ÿèƒ½ç”¨çš„Xposed</li></ul><h2 id="åŠ¨æ‰‹æƒ¹"><a href="#åŠ¨æ‰‹æƒ¹" class="headerlink" title="åŠ¨æ‰‹æƒ¹"></a>åŠ¨æ‰‹æƒ¹</h2><p>å…ˆç”¨<code>XperiFirm</code>ä¸‹è½½æœ€æ–°çš„å›ºä»¶ï¼Œä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œè¯·å…ˆè®¾ç½®å¥½ä»£ç†å†ä¸‹è½½â€¦</p><blockquote><p>ç¾ç‰ˆå›ºä»¶å› ä¸ºç‰ˆæƒé—®é¢˜ç”¨ä¸äº†æŒ‡çº¹â€¦äº²èº«è¸©å‘QAQ</p></blockquote><p>ä¸‹è½½å®Œååˆ é™¤<code>simlock</code>æ–‡ä»¶ï¼Œå†å°†<code>Newflasher</code>è§£å‹åˆ°åˆšåˆšä¸‹å¥½çš„å›ºä»¶åŒæ–‡ä»¶å¤¹ä¸‹ï¼Œæ¥ç€å°†æ‰‹æœºå½»åº•å…³æœºåæŒ‰ç€éŸ³é‡ä¸‹é”®æ¥è¿æ¥ç”µè„‘ï¼Œè¿™æ ·æ‰‹æœºä¼šè¿›å…¥ç»¿ç¯æ¨¡å¼ï¼Œè¿è¡Œ<code>Newflasher</code>ï¼ŒæŒ‰ç…§æç¤ºåˆ·æœºå®Œæˆå³å¯ï¼Œä¸€èˆ¬éƒ½æ˜¯è¿ç»­è¾“å…¥ä¸¤æ¬¡â€œnâ€</p><p>ä¹‹å‰æ²¡æœ‰åˆ·è¿‡çš„åº”è¯¥æ˜¯ä¼šç¼ºå°‘é©±åŠ¨å‡ºç°é—®é¢˜â€¦éœ€è¦å»æ‰¾<code>Flashtool</code>çš„å®‰è£…ç›®å½•ä¸‹çš„ <code>Flashtool-drivers.exe</code>ï¼ˆä¸€èˆ¬é»˜è®¤å®‰è£…åœ¨ <code>C:\Flashtool\</code>) ï¼Œå®‰è£…è“ / ç»¿ç¯æ¨¡å¼å¿…é¡»çš„ä¸¤ä¸ªé©±åŠ¨ <code>Flashmode Drivers</code> å’Œ <code>Fastboot Drivers</code>ï¼ˆå°±æ˜¯ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªæ‰“å‹¾ï¼‰</p><p>ä¸å‡ºæ„å¤–ä¼šå‡ºç°é©±åŠ¨å®‰è£…å¤±è´¥â€¦ä½ éœ€è¦<a href="https://jingyan.baidu.com/article/546ae185d818941148f28c6c.html" target="_blank" rel="noopener">ç¦ç”¨é©±åŠ¨æ•°å­—ç­¾å</a>åå†è¿›è¡Œå®‰è£…</p><p>é©±åŠ¨å®‰è£…å¥½åå°±å¯ä»¥ç»§ç»­åœ¨ç»¿ç¯æ¨¡å¼ä¸‹ç”¨<code>Newflasher</code>å¼ºåˆ·ç³»ç»Ÿäº†</p><p>å¼ºåˆ·å®Œç³»ç»Ÿåå¼€æœºå»å¼€å‘è€…æ¨¡å¼ä¸­æ‰“å¼€USBè°ƒè¯•åè¿æ¥ç”µè„‘ï¼Œåˆ°<code>Minimal ADB and Fastboot</code>å®‰è£…ç›®å½•ä¸‹è¿è¡Œ<code>cmd-here.exe</code>å¹¶ä¸”å°†ä¹‹å‰ä¸‹è½½å¥½çš„<code>TWRP</code> imgæ–‡ä»¶æ”¾è¿›æ¥ï¼Œè¾“å…¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">adb devices</span><br><span class="line">adb reboot bootloader</span><br><span class="line">fastboot devices</span><br><span class="line">fastboot flash recovery æ”¾è¿›æ¥çš„TWRPåå­—.img</span><br><span class="line">fastboot reboot</span><br></pre></td></tr></table></figure><p>ç„¶åå°±æ˜¯éŸ³é‡ä¸‹é”®åŠ å¼€æœºé”®è¿›å…¥<code>recovery</code>åˆ·å…¥<code>Magisk</code></p><p>å®‰è£…<code>EdXposed</code>ä¹‹å‰éœ€è¦åˆ·å¥½<a href="https://github.com/RikkaApps/Riru/releases" target="_blank" rel="noopener">Riru-core</a>ä¹‹ç±»çš„ï¼Œå…·ä½“è§<a href="https://github.com/ElderDrivers/EdXposed" target="_blank" rel="noopener">EdXposed</a></p><p>è¿™åº”è¯¥æ˜¯è‡³ä»Šæœ€æ°´çš„ä¸€ç¯‡äº†ï¼Œä¸ªäººç¬”è®°åªè¦è‡ªå·±çœ‹æ‡‚å°±è¡Œï¼Œæ˜¯å§</p><p>æœ€åç§€ä¸ªå¼å§å£çº¸~</p><p><img src="https://i.loli.net/2019/04/07/5caa08206f3c0.jpg" alt="temp-min.jpg"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;ä¸æ˜¯åŒå‹å·æˆ–è€…æ˜¯ç´¢å°¼æ‰‹æœºçš„ï¼Œæœ¬æ–‡å¹¶æ²¡æœ‰å•¥å‚è€ƒä»·å€¼çš„è¯´&lt;del&gt;æ°´&lt;/del&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;a href=&quot;#å†™åœ¨å‰é¢&quot; class=&quot;headerlink&quot; title=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;/a&gt;å†™
      
    
    </summary>
    
      <category term="note" scheme="https://ratdis.github.io/categories/note/"/>
    
    
      <category term="android" scheme="https://ratdis.github.io/tags/android/"/>
    
      <category term="sony" scheme="https://ratdis.github.io/tags/sony/"/>
    
      <category term="flash" scheme="https://ratdis.github.io/tags/flash/"/>
    
  </entry>
  
  <entry>
    <title>å‘ç”Ÿäº†å•¥</title>
    <link href="https://ratdis.github.io/2019/03/27/wtf/"/>
    <id>https://ratdis.github.io/2019/03/27/wtf/</id>
    <published>2019-03-27T10:10:40.000Z</published>
    <updated>2019-03-27T10:15:31.300Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å‡ æ˜ŸæœŸååˆ é™¤æœ¬æ–‡ï¼Œä»…é€šçŸ¥</p></blockquote><p>è¾¾æˆâ€æ¬¢è¿å›å®¶â€çš„æˆå°±~ï¼Œå‡ è¿‘æŠ˜è…¾åˆè‚¥åˆ°<code>hexo</code>å•¦</p><p>éšæ‰‹ä¸Šäº†ä¸ªå¤‡ç”¨ç«™ <a href="https://ratdis.github.io/">https://ratdis.github.io/</a></p><p>ä¹‹æ‰€ä»¥æ¢åªæ˜¯ä¸ºäº†æå‡è®¿é—®é€Ÿåº¦<del>æ‰ä¸æ˜¯å› ä¸ºä¸»é¢˜</del></p><p><img src="https://i.loli.net/2019/03/27/5c9b4b563d50b.png" alt="æµ‹çš„æœ€å¥½çš„ä¸€æ¬¡é€Ÿè¯¶"></p><p>å› ä¸ºæ˜¯é™æ€åšå®¢ï¼Œæ‰€ä»¥å·æ‡’ç›´æ¥ä½¿ç”¨äº†<code>Disqus</code>ï¼Œ<code>Typecho</code>è¯„è®ºå¯¼å‡ºæ’ä»¶ä¸èµ·ä½œç”¨æš‚æ—¶ä¹Ÿæ²¡å•¥æ³•å­ï¼ŒæŠ±æ­‰QAQ</p><p>æœ€è¿‘å¾ˆç´¯å¾ˆç´¯..å°±è¿™æ ·å§</p><p>å¦å¤–æ¨±èŠ±å¼€äº†~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;å‡ æ˜ŸæœŸååˆ é™¤æœ¬æ–‡ï¼Œä»…é€šçŸ¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¾¾æˆâ€æ¬¢è¿å›å®¶â€çš„æˆå°±~ï¼Œå‡ è¿‘æŠ˜è…¾åˆè‚¥åˆ°&lt;code&gt;hexo&lt;/code&gt;å•¦&lt;/p&gt;
&lt;p&gt;éšæ‰‹ä¸Šäº†ä¸ªå¤‡ç”¨ç«™ &lt;a href=&quot;https://ratdis.github.io/&quot;
      
    
    </summary>
    
      <category term="web" scheme="https://ratdis.github.io/categories/web/"/>
    
    
      <category term="notice" scheme="https://ratdis.github.io/tags/notice/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Caddyæ­å»ºTypecho</title>
    <link href="https://ratdis.github.io/2019/03/22/use-caddy-build-typecho/"/>
    <id>https://ratdis.github.io/2019/03/22/use-caddy-build-typecho/</id>
    <published>2019-03-22T09:17:17.000Z</published>
    <updated>2019-03-26T14:32:20.179Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>2019-03-11ï¼Œæ¢æˆäº†é¦™æ¸¯æœåŠ¡å™¨ï¼Œå®Œå–„é‡æ„ä¸€ä¸‹æ–‡ç« ï¼Œæ–°å¢äº†caddyå¼‚å¸¸ç›‘æ§è„šæœ¬</strong></p></blockquote><h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>ç»§é‡è£…macOSå’ŒAndroidåï¼ŒRatdisç»ˆäºä¹ŸæŠŠè‡ªå·±æœ€ä¸ç†Ÿæ‚‰çš„æœåŠ¡å™¨ç»™é‡è£…äº†ï¼ŒæœåŠ¡å•†å’Œä¸»é¢˜ä¹Ÿæ¢äº†ï¼Œç‰¹æ­¤è®°å½•ä¸‹ï¼Œä»¥å¤‡ä¸æ—¶å†ç”¨=ã€‚=ï¼Œä¹Ÿå¸Œæœ›èƒ½å¸®åˆ°å„ä½å§</p><p>ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘éƒ½æ˜¯ä½¿ç”¨Nginx + Mysqlçš„ç»„åˆï¼Œä½¿ç”¨Letâ€™s Encryptçš„SSLé…åˆè„šæœ¬è‡ªåŠ¨ç»­æœŸï¼Œæ¯æ¬¡éƒ½è¦æŠ˜è…¾ä¸å°‘æ—¶é—´â€¦</p><p>å¼€å§‹ä¹‹æ‰€ä»¥å»å°è¯•Caddyå°±æ˜¯è¢«å¤§ä½¬å®‰åˆ©ï¼Œçœ‹ä¸Šäº†å®ƒæ“ä½œç®€å•å»çš„ï¼Œæœ¬ä½“æ›´æ˜¯ç®€å•åˆ°åªæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨ Go å†™çš„ Web æœåŠ¡å™¨ï¼Œé…ç½®ç®€æ´ï¼Œèƒ½ä¸€é”®å¼€å¯å¹¶ç»­æœŸ HTTPS (Letâ€™s Encrypt)ï¼Œçœäº‹å¤šäº†å•Šï¼Œå®˜ç½‘è¿˜æœ‰ä¸å°‘æ’ä»¶å¯ä»¥å®‰è£…ï¼Œåˆ†åˆ†é’Ÿå³å¯æ­å»ºå¥½ä¸ªåšå®¢æˆ–è€…æ–‡ä»¶ç®¡ç†</p><p>æ“ä½œç³»ç»Ÿä¸º<code>Ubuntu 18.04 LTS</code></p><a id="more"></a><h2 id="Typchoä¸‹è½½"><a href="#Typchoä¸‹è½½" class="headerlink" title="Typchoä¸‹è½½"></a>Typchoä¸‹è½½</h2><p>ç›´æ¥ä¸Šå‘½ä»¤ï¼Œæ³¨æ„è·¯å¾„æ›´æ”¹ä¸ºè‡ªå·±çš„åšå®¢è·¯å¾„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir /var/www/blog.ratdis1.com &amp;&amp; cd /var/www/blog.ratdis1.com</span><br><span class="line"><span class="meta">#</span> ä¸‹è½½å¼€å‘ç‰ˆ</span><br><span class="line">wget http://typecho.org/build.tar.gz</span><br><span class="line">tar -zxvf build.tar.gz</span><br><span class="line">cd build</span><br><span class="line">mv * ../</span><br><span class="line">sudo chown -R www-data:www-data /var/www</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…PHP-7-2å’ŒSqlite-3"><a href="#å®‰è£…PHP-7-2å’ŒSqlite-3" class="headerlink" title="å®‰è£…PHP 7.2å’ŒSqlite 3"></a>å®‰è£…PHP 7.2å’ŒSqlite 3</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>æ›´æ–°ç³»ç»Ÿ</span><br><span class="line">apt-get update -y</span><br><span class="line"><span class="meta">#</span>å®‰è£…PHP 7å’ŒSqlite 3</span><br><span class="line">apt-get install php7.2-cgi php7.2-fpm php7.2-curl php7.2-gd php7.2-mbstring php7.2-xml php7.2-sqlite3 sqlite3 -y</span><br></pre></td></tr></table></figure><h2 id="Caddy"><a href="#Caddy" class="headerlink" title="Caddy"></a>Caddy</h2><h3 id="Caddyä¸‹è½½å®‰è£…"><a href="#Caddyä¸‹è½½å®‰è£…" class="headerlink" title="Caddyä¸‹è½½å®‰è£…"></a>Caddyä¸‹è½½å®‰è£…</h3><p>åœ¨<a href="https://caddyserver.com/download" target="_blank" rel="noopener">å®˜ç½‘</a>è®°ä¸‹ä½ è¦ä½¿ç”¨åˆ°çš„æ’ä»¶åå­—ï¼Œç„¶åæ·»åŠ åˆ°ä¸‹é¢çš„ä»£ç æœ«å°¾è¿è¡Œå®‰è£…å³å¯</p><p>Ratdisè¿™é‡Œæ­å»ºåšå®¢åªç”¨åˆ°äº†<code>http.cache</code>å’Œ<code>http.expires</code>æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl https://getcaddy.com | bash -s personal</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> ä¾‹å¦‚æˆ‘è¦ä½¿ç”¨åˆ°http.cacheå’Œhttp.expiresçš„æ’ä»¶ï¼Œè¿è¡Œ</span><br><span class="line">curl https://getcaddy.com | bash -s personal http.cache,http.expires</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> å®‰è£…åå¯ä»¥ä½¿ç”¨caddy -pluginsæ¥æŸ¥çœ‹è‡ªå·±å·²å®‰è£…çš„æ’ä»¶åˆ—è¡¨</span><br><span class="line"><span class="meta">#</span> å¦‚æœå®‰è£…ååˆæƒ³åŠ ä¸ªæ’ä»¶æ—¶é‡æ–°è¿è¡Œä»¥ä¸Šå‘½ä»¤æ·»åŠ æ–°æ’ä»¶åç§°è‡³æœ«å°¾</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œä½¿ç”¨<code>which caddy</code>åº”è¯¥å°±ä¼šæ˜¾ç¤º<code>/usr/local/bin/caddy</code>äº†</p><h3 id="Caddyé…ç½®æ–‡ä»¶-Caddyfile"><a href="#Caddyé…ç½®æ–‡ä»¶-Caddyfile" class="headerlink" title="Caddyé…ç½®æ–‡ä»¶(Caddyfile)"></a>Caddyé…ç½®æ–‡ä»¶(Caddyfile)</h3><p><strong>è¯·ç›´æ¥å‚è€ƒ<a href="https://doctoralien.gitbooks.io/caddyserver/caddyfilepei-zhi-wen-jian.html" target="_blank" rel="noopener">è¿™é‡Œ</a>å’Œ<a href="https://caddyserver.com/docs" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>!!!</strong></p><p>ä»¥ä¸‹æ˜¯æˆ‘çš„é…ç½®ï¼Œå¦‚æœä½ æ˜¯æŒ‰ç…§æˆ‘ä¸Šé¢çš„æ“ä½œçš„è¯ï¼Œå¤§æ¦‚åªéœ€è¦æ›´æ”¹ä¸ºè‡ªå·±çš„è·¯å¾„å’ŒåŸŸåï¼Œä»¥åŠé‚®ç®±</p><p>ä¿å­˜ä¸º<code>/etc/caddy/Caddyfile</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># æ”¹ï¼ åŸŸåæˆ–è€…IP</span><br><span class="line">ratdis1.com, www.ratdis1.com &#123;</span><br><span class="line"># æ”¹ï¼ åŸŸåæˆ–è€…IP</span><br><span class="line">    redir https://www.ratdis1.com&#123;url&#125;</span><br><span class="line">&#125;</span><br><span class="line"># æ”¹ï¼ åŸŸåæˆ–è€…IP</span><br><span class="line">https://www.ratdis1.com, https://blog.ratdis1.com &#123;</span><br><span class="line">    # æ”¹ï¼å¦‚æœä¸éœ€è¦è®°å½•logä¹Ÿå¯ä»¥ç›´æ¥åˆ æ‰è¿™ä¸€è¡Œ</span><br><span class="line">    log / /var/log/caddy/blog.ratdis1.com.log &quot;&#123;remote&#125; &#123;when&#125; &#123;method&#125; &#123;uri&#125; &#123;proto&#125; &#123;status&#125; &#123;size&#125; &#123;&gt;User-Agent&#125; &#123;latency&#125;&quot;</span><br><span class="line">cache</span><br><span class="line">    gzip &#123;</span><br><span class="line">        level 4</span><br><span class="line">    &#125;</span><br><span class="line">    # æ”¹ï¼</span><br><span class="line">    tls admin@ratdis1.com</span><br><span class="line">    header / Strict-Transport-Security &quot;max-age=31536000&quot;</span><br><span class="line">    expires &#123;</span><br><span class="line">         match .css$ 1m</span><br><span class="line">         match .js$ 1m</span><br><span class="line">         match .png$ 1m</span><br><span class="line">         match .jpg$ 1m</span><br><span class="line">    &#125;</span><br><span class="line">    # æ”¹ï¼</span><br><span class="line">    root /var/www/blog.ratdis1.com</span><br><span class="line">    fastcgi / /run/php/php7.2-fpm.sock php</span><br><span class="line">    rewrite &#123;</span><br><span class="line">        if &#123;path&#125; not_match ^\/admin</span><br><span class="line">        to &#123;path&#125; &#123;path&#125;/ /index.php?&#123;query&#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ä½¿ç”¨åˆ°çš„<code>cache</code>éœ€è¦æå‰å®‰è£…å¥½<code>http.cache</code>æ’ä»¶ï¼Œ<code>expires</code>ä¹Ÿéœ€è¦<code>http.expires</code>æ’ä»¶</p><p>logæ–‡ä»¶éœ€è¦è‡ªå·±æ‰‹åŠ¨åˆ›å»ºå¥½<code>vim /var/log/caddy/blog.ratdis1.com.log</code>ï¼Œéšä¾¿å†™ç‚¹ä¿å­˜åï¼Œç»™æƒé™<code>chown www-data:www-data /var/log/caddy/blog.ratdis1.com.log</code>,å†<code>systemctl reload caddy.service</code>é‡è½½é…ç½®æ–‡ä»¶</p><h3 id="Caddyå¼€æœºè‡ªå¯"><a href="#Caddyå¼€æœºè‡ªå¯" class="headerlink" title="Caddyå¼€æœºè‡ªå¯"></a>Caddyå¼€æœºè‡ªå¯</h3><p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨<code>systemd</code>å®ç°</p><p>å…ˆå»ä¸‹è½½å®˜æ–¹æä¾›çš„<a href="https://github.com/mholt/caddy/blob/master/dist/init/linux-systemd/caddy.service" target="_blank" rel="noopener">caddy.service</a>åˆ°/etc/systemd/system/</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -s https://raw.githubusercontent.com/mholt/caddy/master/dist/init/linux-systemd/caddy.service -o /etc/systemd/system/caddy.service</span><br></pre></td></tr></table></figure><p>è„šæœ¬é‡Œé¢ç”¨åˆ°äº†å‡ ä¸ªæ–‡ä»¶å’Œæ–‡ä»¶å¤¹éœ€è¦æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨åˆ›å»ºï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±æ›´æ”¹ç›®å½•</p><p><code>/etc/caddy</code> æ”¾ Caddy çš„é…ç½®æ–‡ä»¶ï¼Œ<code>/etc/ssl/caddy</code> æ”¾è¯ä¹¦ï¼Œ<code>/var/www</code> æ˜¯é»˜è®¤çš„ç½‘ç«™ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /etc/caddy /etc/ssl/caddy /var/www</span><br><span class="line">sudo chown -R root:www-data /etc/caddy</span><br><span class="line">sudo chown -R www-data:root /etc/ssl/caddy</span><br><span class="line">sudo chown www-data:www-data /var/www</span><br><span class="line">sudo chmod 0770 /etc/ssl/caddy</span><br><span class="line">sudo touch /etc/caddy/Caddyfile</span><br></pre></td></tr></table></figure><p>è®© Caddy å¼€æœºè‡ªå¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl enable caddy.service</span><br></pre></td></tr></table></figure><p>æ¥ç€å¯ä»¥é‡å¯è¿è¡Œ<code>ps -ef | grep caddy</code>çœ‹çœ‹æ˜¯å¦æ˜¯å¦èµ·ä½œç”¨</p><p>å¦‚æœæ²¡æœ‰ä½¿ç”¨<code>systemctl status caddy.service</code>æŸ¥çœ‹æŠ¥é”™ï¼Œä¸€èˆ¬éƒ½æ˜¯ä»€ä¹ˆæ–‡ä»¶æƒé™ä¹‹ç±»çš„å°é—®é¢˜</p><p><code>Caddy</code>çš„éƒ¨åˆ†åˆ°æ­¤ä¸ºæ­¢äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç´§å¼ åˆºæ¿€çš„å®‰è£…<code>Typecho</code>äº†</p><p>ç„¶åæµè§ˆå™¨æ‰“å¼€ä½ çš„åŸŸå/IPï¼Œä¸å‡ºæ„å¤–å°±ä¼šè§åˆ°Typechoçš„å®‰è£…ç•Œé¢äº†ï¼Œç®€å•è®¾ç½®å‡ ä¸ªå¯†ç åï¼Œåšå®¢å°±æ­å»ºå¥½äº†</p><h2 id="è„šæœ¬ç›‘æ§caddy"><a href="#è„šæœ¬ç›‘æ§caddy" class="headerlink" title="è„šæœ¬ç›‘æ§caddy"></a>è„šæœ¬ç›‘æ§caddy</h2><p>ä¹‹å‰é‡åˆ°è¿‡å‡ æ¬¡caddyæŒ‚äº†çš„æƒ…å†µï¼Œæ‰‹åŠ¨é‡å¯ä¸€ä¸‹å°±å¥½äº†ï¼Œä½†æ˜¯è¿™äº‹è¿˜æ˜¯æ‰”ç»™è„šæœ¬å»åšå§~</p><p>ä»¥ä¸‹è„šæœ¬å¯ä»¥ç›´æ¥å¥—ç”¨ï¼Œåªè¦æŠŠ21è¡Œä¸­çš„åŸŸåæ”¹æˆè‡ªå·±çš„å³å¯</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line">host_dir=<span class="string">"/root/"</span>                                       <span class="comment"># å½“å‰ç”¨æˆ·æ ¹ç›®å½•</span></span><br><span class="line">proc_name=<span class="string">"caddy"</span>                                       <span class="comment"># è¿›ç¨‹å</span></span><br><span class="line">file_name=<span class="string">"restart_caddy.log"</span>               <span class="comment"># æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">pid=0</span><br><span class="line"></span><br><span class="line">proc_num()                                              <span class="comment"># è®¡ç®—è¿›ç¨‹æ•°</span></span><br><span class="line">&#123;</span><br><span class="line">    num=`ps -ef | grep <span class="variable">$proc_name</span> | grep -v grep | wc -l`</span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$num</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">proc_id()                                               <span class="comment"># è¿›ç¨‹å·</span></span><br><span class="line">&#123;</span><br><span class="line">    pid=`ps -ef | grep <span class="variable">$proc_name</span> | grep -v grep | awk <span class="string">'&#123;print $2&#125;'</span>`</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># é€šè¿‡curlæ¨¡æ‹Ÿç™»å½•è·å–http_code,æ¨¡æ‹Ÿç™»å½•å‚æ•°ä»…ä¾›å‚è€ƒ</span></span><br><span class="line"><span class="comment"># å¦‚æœåªéœ€è¦åˆ¤æ–­æŸé¡µé¢çš„çŠ¶æ€å¯ä½¿ç”¨curl -I -s -w "%&#123;http_code&#125;" -o /dev/null http://www.baidu.com/ ç›´æ¥è·å–å³å¯</span></span><br><span class="line"><span class="comment"># http_code=`curl -I -s -w "%&#123;http_code&#125;" -o -d "userKey=admin&amp;pass=c9127e832b41a" /dev/null  http://portal.ly-sky.com/login.do?login= | head -n 1 | cut -d$' ' -f2`</span></span><br><span class="line">http_code=`curl -I -s -w <span class="string">"%&#123;http_code&#125;"</span> -o /dev/null https://www.ratdis1.com/`</span><br><span class="line"></span><br><span class="line">proc_num</span><br><span class="line">number=$?</span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$number</span> -eq 0 ]]||[[ <span class="variable">$http_code</span> -ne 200 ]] <span class="comment"># åˆ¤æ–­è¿›ç¨‹æ˜¯å¦å­˜åœ¨,é¡µé¢çŠ¶æ€æ˜¯å¦æ˜¯200</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="comment"># nohup ./run.sh&gt;../logs/urp.log 2&gt;&amp;1 &amp;    # é‡å¯è¿›ç¨‹çš„å‘½ä»¤ï¼Œè¯·ç›¸åº”ä¿®æ”¹</span></span><br><span class="line">    <span class="comment"># nohup /usr/local/bin/caddy -log stdout -agree=true -conf=/etc/caddy/Caddyfile -root=/var/tmp -quic &amp;</span></span><br><span class="line">    systemctl restart caddy.service</span><br><span class="line">    sleep 3                                  <span class="comment">#å»¶è¿Ÿ3ç§’æ˜¯ä¸ºäº†ç¡®ä¿è¿›ç¨‹å·²æ­£å¸¸å¯åŠ¨å¹¶æ–¹ä¾¿è·å–pidï¼Œå¦åˆ™æœ‰å¯èƒ½è·å–ä¸åˆ°pid</span></span><br><span class="line">proc_id                                         <span class="comment"># è·å–æ–°è¿›ç¨‹å·</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$pid</span>, `date` &gt;&gt; <span class="variable">$host_dir</span><span class="variable">$file_name</span>     <span class="comment"># å°†æ–°è¿›ç¨‹å·å’Œé‡å¯æ—¶é—´è®°å½•</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>è®°å¾—ç»™è¿è¡Œæƒé™<code>chmod 700 monitor_caddy.sh</code></p><p>æ‰‹åŠ¨æµ‹è¯•ç›‘æ§æ˜¯å¦æ­£å¸¸ï¼Œè¿è¡Œ<code>systemctl stop caddy.service</code>åå†ä½¿ç”¨<code>./monitor_caddy.sh</code>ï¼ŒæŸ¥çœ‹<code>restart_caddy.log</code></p><p>æ¥ç€ä½¿ç”¨<code>crontab</code>æ¯5åˆ†é’Ÿè¿è¡Œä¸€æ¬¡è„šæœ¬</p><p>ä½¿ç”¨<code>crontab -e</code>åŠ å…¥ä¸€è¡Œ<code>*/5 * * * * /root/monitor_caddy.sh</code></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>Caddy</code>çš„é…ç½®çš„ç¡®å¾ˆç®€å•ï¼Œé…åˆ<code>PHP 7.2</code>å’Œ<code>Sqlite 3</code>æ€»å…±å çš„å†…å­˜æ¯”ä½¿ç”¨<code>Nginx+PHP 7.2+Mysql</code>å°äº†ä¸å°‘ï¼Œæ€§èƒ½å·®è·Ratdisä¹Ÿæ²¡æœ‰æ„Ÿè§‰æœ‰å•¥å·®ï¼Œå¹çˆ†~</p><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://my.oschina.net/u/3009151/blog/834946" target="_blank" rel="noopener">1</a> <a href="https://www.giuem.com/caddy-tutorial-for-debian/" target="_blank" rel="noopener">2</a> <a href="https://liuzhichao.com/2018/caddy/" target="_blank" rel="noopener">3</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;2019-03-11ï¼Œæ¢æˆäº†é¦™æ¸¯æœåŠ¡å™¨ï¼Œå®Œå–„é‡æ„ä¸€ä¸‹æ–‡ç« ï¼Œæ–°å¢äº†caddyå¼‚å¸¸ç›‘æ§è„šæœ¬&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;a href=&quot;#å†™åœ¨å‰é¢&quot; class=&quot;headerlink&quot; title=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;/a&gt;å†™åœ¨å‰é¢&lt;/h2&gt;&lt;p&gt;ç»§é‡è£…macOSå’ŒAndroidåï¼ŒRatdisç»ˆäºä¹ŸæŠŠè‡ªå·±æœ€ä¸ç†Ÿæ‚‰çš„æœåŠ¡å™¨ç»™é‡è£…äº†ï¼ŒæœåŠ¡å•†å’Œä¸»é¢˜ä¹Ÿæ¢äº†ï¼Œç‰¹æ­¤è®°å½•ä¸‹ï¼Œä»¥å¤‡ä¸æ—¶å†ç”¨=ã€‚=ï¼Œä¹Ÿå¸Œæœ›èƒ½å¸®åˆ°å„ä½å§&lt;/p&gt;
&lt;p&gt;ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘éƒ½æ˜¯ä½¿ç”¨Nginx + Mysqlçš„ç»„åˆï¼Œä½¿ç”¨Letâ€™s Encryptçš„SSLé…åˆè„šæœ¬è‡ªåŠ¨ç»­æœŸï¼Œæ¯æ¬¡éƒ½è¦æŠ˜è…¾ä¸å°‘æ—¶é—´â€¦&lt;/p&gt;
&lt;p&gt;å¼€å§‹ä¹‹æ‰€ä»¥å»å°è¯•Caddyå°±æ˜¯è¢«å¤§ä½¬å®‰åˆ©ï¼Œçœ‹ä¸Šäº†å®ƒæ“ä½œç®€å•å»çš„ï¼Œæœ¬ä½“æ›´æ˜¯ç®€å•åˆ°åªæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨ Go å†™çš„ Web æœåŠ¡å™¨ï¼Œé…ç½®ç®€æ´ï¼Œèƒ½ä¸€é”®å¼€å¯å¹¶ç»­æœŸ HTTPS (Letâ€™s Encrypt)ï¼Œçœäº‹å¤šäº†å•Šï¼Œå®˜ç½‘è¿˜æœ‰ä¸å°‘æ’ä»¶å¯ä»¥å®‰è£…ï¼Œåˆ†åˆ†é’Ÿå³å¯æ­å»ºå¥½ä¸ªåšå®¢æˆ–è€…æ–‡ä»¶ç®¡ç†&lt;/p&gt;
&lt;p&gt;æ“ä½œç³»ç»Ÿä¸º&lt;code&gt;Ubuntu 18.04 LTS&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="web" scheme="https://ratdis.github.io/categories/web/"/>
    
    
      <category term="caddy" scheme="https://ratdis.github.io/tags/caddy/"/>
    
      <category term="typecho" scheme="https://ratdis.github.io/tags/typecho/"/>
    
  </entry>
  
  <entry>
    <title>è®ºä½œä¸š</title>
    <link href="https://ratdis.github.io/2019/03/01/view-of-homework/"/>
    <id>https://ratdis.github.io/2019/03/01/view-of-homework/</id>
    <published>2019-03-01T09:17:17.000Z</published>
    <updated>2019-03-26T14:30:55.397Z</updated>
    
    <content type="html"><![CDATA[<p>  æ—¶éš”å¤šæ—¥ï¼Œåœ¨å®¶é—²æ¥æ— äº‹çš„æˆ‘åˆä¸€æ¬¡çš„æç¬”äº†ï¼Œè¶Šæ˜¯ä¸´è¿‘å¼€å­¦ï¼Œè¶Šæ˜¯æ„Ÿåˆ°ä¸€ç§å‹è¿«æ„Ÿï¼Œå¤§æ¦‚æ˜¯ä¸€ç§æ²¡æœ‰å¥½å¥½æŠŠæ¡ä½å‡æœŸçš„æ„§ç–šï¼Œåç¦»äº†å‡æœŸæœ€åˆçš„æœŸæœ›ï¼Œä»”ç»†æƒ³æƒ³ï¼ŒåŸå› ä¹‹ä¸€æ˜¯æ²¡æœ‰ä½œä¸šï¼Œ  ä¸å…¶è¯´æ˜¯ä½œä¸šä¸å¦¨è¯´æˆç›®æ ‡æˆ–ä»»åŠ¡ï¼Œå…·æœ‰æ˜ç¡®é™å®šæ—¥æœŸï¼Œå¹¶ä¼´éšç€ä¸å¯çŸ¥çš„å¤±è´¥åæœçš„é‚£ç§</p><p>  å°±æˆ‘æ‰€æ¥è§¦çš„å¤§å­¦ç”Ÿäººç¾¤ä¸­ï¼Œå¤§éƒ¨åˆ†å­¦ç”Ÿéƒ½æ˜¯æ— æ³•<strong>ç‹¬ç«‹</strong>çš„å¥½å¥½åˆ©ç”¨é•¿å‡æœŸçš„ï¼Œæ›´å¤šçš„æ˜¯æ— æ‰€äº‹äº‹çš„åº¦è¿‡å‡æœŸï¼Œå¸¸å¸¸æ„Ÿåˆ°æ— èŠï¼Œè¿™å¹¶ä¸æ˜¯è¯´è¿™å‡æœŸè¿‡èµ·æ¥å¹¶æ— æ„ä¹‰ï¼Œåªæ˜¯åœ¨å¼ºè°ƒä½œä¸šåœ¨å‡æœŸä¸­çš„ä½œç”¨ï¼Œæ‰€ä»¥æ¸¸æˆå‡æœŸä¹Ÿå¥½ï¼Œæ‰“å·¥å‡æœŸä¹Ÿç½¢ï¼Œåªä¸è¿‡æ˜¯ç”Ÿæ´»æ–¹å¼çš„ä¸åŒè€Œå·²ï¼Œå°†è‡ªå·±çš„ç”Ÿæ´»è§‚å¼ºåŠ äºäººæ˜¯ä¸åº”è¯¥çš„</p><p> ä¸Šé¢ä¹‹æ‰€ä»¥è¯´çš„æ˜¯ç‹¬ç«‹çš„åˆ©ç”¨é•¿å‡æœŸï¼Œæ˜¯å› ä¸ºå¦‚æœåœ¨é›†ä½“ä¸­çš„è¯ï¼Œé€šå¸¸å°±ä¼šæœ‰ç±»ä¼¼äºä½œä¸šæ•ˆæœçš„ä¸œè¥¿ï¼Œä¸è®ºæ˜¯ä¸æƒ³æ˜¾å¾—ç‰¹æ®Šçš„å¿ƒç†ï¼Œè¿˜æ˜¯æ²¡æœ‰æŒ‰æ—¶å®Œæˆå¯èƒ½ä¼šè¢«è¾é€€çš„ç°å®ï¼Œæ¸¸æˆÂ·æ‰“å·¥å¯ä»¥è¯´éƒ½æœ‰ç€å„è‡ªçš„â€œä½œä¸šâ€</p><p>  å¾ˆå¤šäººä¼šåœ¨å‡æœŸå‰å®šå¥½å‡æœŸç›®æ ‡ï¼Œä½†æ˜¯å¦‚æœæ˜¯è‡ªæˆ‘ç›‘ç£çš„é‚£ç§ï¼Œå®Œæˆç›®æ ‡çš„äººåº”è¯¥ä¸å¤šï¼Œéƒ½è¯´æœ€å¤§çš„æ•Œäººæ˜¯è‡ªå·±ï¼Œè‡ªå·±å¾€å¾€æ˜¯å¯¹è‡ªå·±ä¸‹ä¸äº†æ‰‹çš„ï¼Œä¸æ˜¯æ‰€æœ‰äººéƒ½å¯ä»¥å®Œæˆè‡ªæˆ‘ç›‘ç£çš„ï¼Œè‡ªåˆ¶åŠ›ä»€ä¹ˆçš„æˆ–å¤šæˆ–å°‘éƒ½ä¼šè¢«å¦‚ä»Šå®½æ¾çš„å¤§å­¦ç¯å¢ƒç»™ç£¨äº†ä¸ªæ´ï¼Œå†åŠ ä¸Šèº«è¾¹å„ç§å„æ ·çš„è¯±æƒ‘ï¼Œç‹¬ç«‹çš„å®ç°ä½œä¸šæ•ˆæœæ˜¯è¶Šæ¥è¶Šéš¾äº†ï¼Œé™¤äº†è¿™äº›ï¼Œæ‡’ä¹Ÿæ˜¯ä¸»è¦åŸå› </p><p>  æˆ‘ä»¬éƒ½æœ‰ç€å¯¹æœªçŸ¥çš„å¥½å¥‡å¿ƒï¼Œå”¯ä¸€åŒºåˆ«å°±æ˜¯åœ¨è¡ŒåŠ¨ä¸Šï¼Œå¤§å­¦ä¹‹å‰æœ‰ç€æ•°ä¸å°½çš„ä½œä¸šå‘Šè¯‰ç€æˆ‘ä»¬æ€ä¹ˆèµ°ï¼Œè‹¦ä¸å ªè¨€ï¼Œåˆ°äº†å¤§å­¦çªç„¶æ²¡äº†ä½œä¸šï¼Œåˆšå¼€å§‹æ¬£å–œä¸å·²ï¼Œéšåæææƒšæƒšï¼Œæœ‰çš„ä¸åœå¯»æ‰¾ï¼Œæœ‰çš„é¡ºå…¶è‡ªç„¶ï¼Œæœ‰çš„ä¸€é¡¿ä¹±å†™</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;  æ—¶éš”å¤šæ—¥ï¼Œåœ¨å®¶é—²æ¥æ— äº‹çš„æˆ‘åˆä¸€æ¬¡çš„æç¬”äº†ï¼Œè¶Šæ˜¯ä¸´è¿‘å¼€å­¦ï¼Œè¶Šæ˜¯æ„Ÿåˆ°ä¸€ç§å‹è¿«æ„Ÿï¼Œå¤§æ¦‚æ˜¯ä¸€ç§æ²¡æœ‰å¥½å¥½æŠŠæ¡ä½å‡æœŸçš„æ„§ç–šï¼Œåç¦»äº†å‡æœŸæœ€åˆçš„æœŸæœ›ï¼Œä»”ç»†æƒ³æƒ³ï¼ŒåŸå› ä¹‹ä¸€æ˜¯æ²¡æœ‰ä½œä¸šï¼Œ  ä¸å…¶è¯´æ˜¯ä½œä¸šä¸å¦¨è¯´æˆç›®æ ‡æˆ–ä»»åŠ¡ï¼Œå…·æœ‰æ˜ç¡®é™å®šæ—¥æœŸï¼Œå¹¶ä¼´éšç€ä¸å¯çŸ¥çš„å¤±è´¥åæœçš„é‚£ç§&lt;/p&gt;
&lt;p&gt;  å°±
      
    
    </summary>
    
      <category term="view" scheme="https://ratdis.github.io/categories/view/"/>
    
    
      <category term="chatting" scheme="https://ratdis.github.io/tags/chatting/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨Pythonå†™ä¸ªå°Bot</title>
    <link href="https://ratdis.github.io/2019/01/19/creat-a-telegram-bot-with-python/"/>
    <id>https://ratdis.github.io/2019/01/19/creat-a-telegram-bot-with-python/</id>
    <published>2019-01-19T09:17:17.000Z</published>
    <updated>2019-03-26T14:32:02.850Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ç”¨Pythonç©ä¸‹Telegramä¸­çš„Botå§</p><p>å®ç°ä¸€ä¸ªå®æ—¶æŸ¥è¯¢æœåŠ¡å™¨CPUåˆ©ç”¨ç‡çš„Bot</p><blockquote><p>Wikipedia:</p><p><strong>Telegram</strong>æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å³æ—¶é€šä¿¡è½¯ä»¶ï¼Œå®ƒçš„å®¢æˆ·ç«¯æ˜¯è‡ªç”±åŠå¼€æ”¾æºä»£ç è½¯ä»¶ï¼Œä½†æ˜¯å®ƒçš„æœåŠ¡å™¨æ˜¯ä¸“æœ‰è½¯ä»¶ã€‚ç”¨æˆ·å¯ä»¥ç›¸äº’äº¤æ¢åŠ å¯†ä¸è‡ªææ„çš„æ¶ˆæ¯ï¼Œå‘é€ç…§ç‰‡ã€å½±ç‰‡ç­‰æ‰€æœ‰ç±»å‹æ–‡ä»¶ã€‚å®˜æ–¹æä¾›æ‰‹æœºç‰ˆï¼ˆAndroidã€iOSã€Windows Phoneï¼‰ã€æ¡Œé¢ç‰ˆï¼ˆWindowsã€macOSã€Linuxï¼‰å’Œç½‘é¡µç‰ˆç­‰å¤šç§å¹³å°å®¢æˆ·ç«¯ï¼›åŒæ—¶å®˜æ–¹å¼€æ”¾åº”ç”¨ç¨‹åºæ¥å£ï¼Œå› æ­¤æ‹¥æœ‰è®¸å¤šç¬¬ä¸‰æ–¹çš„å®¢æˆ·ç«¯å¯ä¾›é€‰æ‹©ï¼Œå…¶ä¸­å¤šæ¬¾å†…ç½®ä¸­æ–‡ã€‚</p></blockquote><p>Ratdisçš„ä¸»åŠ›å³æ—¶é€šè®¯è½¯ä»¶ï¼Œä¸ªäººçè¯´é¢‘é“ : <a href="https://t.me/xia_shuo" target="_blank" rel="noopener">é“¾æ¥</a></p><p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä½¿ç”¨<code>Python3</code></p><h2 id="å¼€å‘ç¯å¢ƒæ­å»º"><a href="#å¼€å‘ç¯å¢ƒæ­å»º" class="headerlink" title="å¼€å‘ç¯å¢ƒæ­å»º"></a>å¼€å‘ç¯å¢ƒæ­å»º</h2><h3 id="ä½¿ç”¨virtual-environment"><a href="#ä½¿ç”¨virtual-environment" class="headerlink" title="ä½¿ç”¨virtual environment"></a>ä½¿ç”¨virtual environment</h3><p>é¡¹ç›®ä½¿ç”¨virtual environmentå¯æ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™ç©æ„å‘¢</p><p>ä½ å¯ä»¥ç®€å•çš„è®¤ä¸º<code>virtual environment</code>æ˜¯ä¸€ä¸ªæ²¡æœ‰å®‰è£…ä»»ä½•ç¬¬ä¸‰æ–¹åº“çš„<code>Python</code>ç¯å¢ƒï¼Œå½“æˆ‘ä»¬å†™å®Œä¸€ä¸ªé¡¹ç›®æ‰“ç®—åˆ†äº«ç»™å…¶ä»–äººçš„æ—¶å€™å°±éœ€è¦å‘Šè¯‰ä»–è¿™ä¸ªé¡¹ç›®ç”¨äº†é‚£äº›ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚æœä½¿ç”¨äº†<code>virtual environment</code>å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‰¾å…¨æ‰€æœ‰ä½¿ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“äº†ï¼ˆå¯¼å‡ºæ–¹æ³•è§ä¸‹æ–‡ï¼‰</p><h4 id="æœ¬åœ°ä½¿ç”¨"><a href="#æœ¬åœ°ä½¿ç”¨" class="headerlink" title="æœ¬åœ°ä½¿ç”¨"></a>æœ¬åœ°ä½¿ç”¨</h4><p>åœ¨Pycharmä¸­åˆ›å»ºé¡¹ç›®æ—¶å€™é»˜è®¤å°±æ˜¯ä½¿ç”¨çš„virtual environmentäº†</p><p>ä¸ç”¨Pycharmçš„è¯ï¼Œ(Linux&amp;Mac)æ“ä½œå’ŒæœåŠ¡å™¨ç«¯æ˜¯ä¸€æ ·çš„</p><h4 id="æœåŠ¡å™¨ç«¯ä½¿ç”¨"><a href="#æœåŠ¡å™¨ç«¯ä½¿ç”¨" class="headerlink" title="æœåŠ¡å™¨ç«¯ä½¿ç”¨"></a>æœåŠ¡å™¨ç«¯ä½¿ç”¨</h4><p>å…ˆä½¿ç”¨pipå®‰è£…å¥½virtualenv</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install virtualenv</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰å®‰è£…pipçš„ï¼Œå…ˆå®‰è£…pip</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python3-pip</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä½ å°†è¦ä½¿ç”¨åˆ°çš„é¡¹ç›®æ–‡ä»¶å¤¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir TGbot</span><br><span class="line">cd TGbot</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªåä¸º<code>venv</code>çš„pythonè¿è¡Œç¯å¢ƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virtualenv --no-site-packages venv</span><br></pre></td></tr></table></figure><p>æ¥ç€ä½¿ç”¨<code>source</code>è¿›å…¥<code>venv</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source venv/bin/activate</span><br></pre></td></tr></table></figure><p>ä¸å‡ºæ„å¤–çš„è¯ï¼Œå‘½ä»¤æç¤ºç¬¦æœ€å‰é¢ä¼šå¤šä¸€ä¸ª(venv)</p><h4 id="å¯¼å‡ºé¡¹ç›®æ¨¡å—ä¾èµ–ä»¥åŠå®‰è£…"><a href="#å¯¼å‡ºé¡¹ç›®æ¨¡å—ä¾èµ–ä»¥åŠå®‰è£…" class="headerlink" title="å¯¼å‡ºé¡¹ç›®æ¨¡å—ä¾èµ–ä»¥åŠå®‰è£…"></a>å¯¼å‡ºé¡¹ç›®æ¨¡å—ä¾èµ–ä»¥åŠå®‰è£…</h4><p>å½“ä½ å†™å¥½ä¸€ä¸ªé¡¹ç›®æ‰“ç®—ç»™ä»–äººä½¿ç”¨æ—¶å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†é¡¹ç›®æ‰€ç”¨åˆ°çš„æ‰€æœ‰æ¨¡å—ä¾èµ–å¯¼å‡ºåˆ°requirements.txt</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure><p>è¿™æ ·åˆ«äººå°±å¯ä»¥ç›´æ¥è¿™æ ·å®‰è£…ä½¿ç”¨å•¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -r requirements.txt</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…å¥½å°†è¦ä½¿ç”¨åˆ°çš„æ¨¡å—"><a href="#å®‰è£…å¥½å°†è¦ä½¿ç”¨åˆ°çš„æ¨¡å—" class="headerlink" title="å®‰è£…å¥½å°†è¦ä½¿ç”¨åˆ°çš„æ¨¡å—"></a>å®‰è£…å¥½å°†è¦ä½¿ç”¨åˆ°çš„æ¨¡å—</h3><p>åœ¨Pycharmä¸­ Preferencesæœç´¢interpreteråï¼Œç‚¹åŠ å·æœç´¢æ¨¡å—åç§°å³å¯å®‰è£…</p><p><img src="https://www.ratdis1.com/usr/uploads/2019/01/3127646363.png" alt="Screen Shot 2019-01-12 at 2.48.35 PM-min.png"></p><p>æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„æ¨¡å—æœ‰ <code>python-telegram-bot</code>(Telegram API)ï¼Œ<code>ruamel.yaml</code>(å¤„ç†yamlé…ç½®æ–‡ä»¶çš„)ï¼Œ<code>psutil</code>ï¼ˆè·¨å¹³å°è·å–ç³»ç»Ÿä¿¡æ¯ï¼‰</p><p>ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨å®‰è£…æ‰€æœ‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install python-telegram-bot psutil ruamel.yaml</span><br></pre></td></tr></table></figure><h2 id="Telegramä¸­çš„Botä»‹ç»"><a href="#Telegramä¸­çš„Botä»‹ç»" class="headerlink" title="Telegramä¸­çš„Botä»‹ç»"></a>Telegramä¸­çš„Botä»‹ç»</h2><blockquote><h3 id="How-are-bots-different-from-humans"><a href="#How-are-bots-different-from-humans" class="headerlink" title="How are bots different from humans?"></a>How are bots different from humans?</h3><ul><li>Bots have no online status and no last seen timestamps, the interface shows the label <strong>â€˜botâ€™</strong> instead.</li><li>Bots have limited cloud storage â€” older messages may be removed by the server shortly after they have been processed.</li><li>Bots canâ€™t initiate conversations with users. A user <strong>must</strong> either add them to a group or send them a message first. People can use <code>telegram.me/&lt;bot_username&gt;</code> links or username search to find your bot.</li><li>Bot usernames always end in â€˜botâ€™ (e.g. <a href="https://telegram.me/triviabot" target="_blank" rel="noopener">@TriviaBot</a>, <a href="https://telegram.me/githubbot" target="_blank" rel="noopener">@GitHub_bot</a>).</li><li>When added to a group, bots do not receive all messages by default (see <a href="https://core.telegram.org/bots#privacy-mode" target="_blank" rel="noopener">Privacy mode</a>).</li><li><strong>Bots never eat, sleep or complain (unless expressly programmed otherwise).</strong></li></ul></blockquote><p>æ€»ä¹‹botä¸çœŸäººæœ€å¤§å·®è·å°±æ˜¯æ²¡æœ‰åœ¨çº¿çŠ¶æ€ï¼Œä¸èƒ½ä¸»åŠ¨èŠå¤©åŠ ç¾¤ä»¥åŠåå­—ç»“å°¾å¿…é¡»ä¸ºbotï¼ŒçœŸäººèƒ½åšçš„å‡ ä¹éƒ½èƒ½åšï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æœ‰çš„åŠŸèƒ½ï¼Œå…·ä½“è¿˜æ˜¯è§<a href="https://core.telegram.org/bots" target="_blank" rel="noopener">å®˜æ–¹ä»‹ç»</a>å§</p><h2 id="å’ŒBotfatherç­¾è®¢å¥‘çº¦æˆä¸ºé©¬çŒ´çƒ§é…’Botå§ï¼ˆä¸"><a href="#å’ŒBotfatherç­¾è®¢å¥‘çº¦æˆä¸ºé©¬çŒ´çƒ§é…’Botå§ï¼ˆä¸" class="headerlink" title="å’ŒBotfatherç­¾è®¢å¥‘çº¦æˆä¸ºé©¬çŒ´çƒ§é…’Botå§ï¼ˆä¸"></a>å’ŒBotfatherç­¾è®¢å¥‘çº¦æˆä¸ºé©¬çŒ´çƒ§é…’Botå§ï¼ˆä¸</h2><blockquote><h3 id="How-do-I-create-a-bot"><a href="#How-do-I-create-a-bot" class="headerlink" title="How do I create a bot?"></a>How do I create a bot?</h3><p>Thereâ€™s aâ€¦ bot for that. Just talk to <a href="https://telegram.me/botfather" target="_blank" rel="noopener">BotFather</a> (described <a href="https://core.telegram.org/bots#6-botfather" target="_blank" rel="noopener">below</a>) and follow a few simple steps. Once youâ€™ve created a bot and received your authorization token, head down to the <a href="https://core.telegram.org/bots/api" target="_blank" rel="noopener">Bot API manual</a> to see what you can teach your bot to do.</p></blockquote><p><del>å°±çŸ¥é“è´´å®˜ç½‘ä»‹ç»ï¼Œè¦ä½ ä½•ç”¨</del></p><p>è·Ÿç€<a href="https://telegram.me/botfather" target="_blank" rel="noopener">BotFather</a>ä¸€é¡¿æ“ä½œå°±å®Œäº‹äº†</p><p>æ³¨æ„ä¸è¦æ³„æ¼token</p><h2 id="å¼€å§‹å§ï¼"><a href="#å¼€å§‹å§ï¼" class="headerlink" title="å¼€å§‹å§ï¼"></a>å¼€å§‹å§ï¼</h2><h3 id="ä½¿ç”¨yamlå¤„ç†ç±»ä¼¼äºTOKENçš„ä¸ªäººé…ç½®"><a href="#ä½¿ç”¨yamlå¤„ç†ç±»ä¼¼äºTOKENçš„ä¸ªäººé…ç½®" class="headerlink" title="ä½¿ç”¨yamlå¤„ç†ç±»ä¼¼äºTOKENçš„ä¸ªäººé…ç½®"></a>ä½¿ç”¨yamlå¤„ç†ç±»ä¼¼äºTOKENçš„ä¸ªäººé…ç½®</h3><p>å¦‚æœæƒ³è®©ä»£ç èƒ½å¤Ÿå¾ˆå¿«çš„ä¸ºä»–äººæ‰€ç”¨ï¼Œåœ¨é…ç½®æ–¹é¢å°±åº”è¯¥å•ç‹¬çš„è®¾ç«‹ä¸€ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥æ˜¯<code>yaml</code>ä¹Ÿå¯ä»¥æ˜¯<code>json</code>ï¼Œè¿™ä¸¤ç§é…ç½®æ–‡ä»¶åœ¨<code>Python</code>ä¸­éƒ½æœ‰å¾ˆå¥½ç”¨çš„æ¨¡å—ï¼Œè¿™é‡Œæˆ‘ä»¬å°±æ¥ä½¿ç”¨<code>yaml</code>ä½œä¸ºé…ç½®æ–‡ä»¶æ ¼å¼å§<del>ï¼ˆ<code>json</code>ä¸­èŠ±æ‹¬å·å¤ªå¤šï¼Œçœ‹ç€éš¾å—</del></p><p>ç”±äºRatdisä¹Ÿæ˜¯é¦–æ¬¡ç”¨åˆ°<code>yaml</code>ï¼Œä¸Š<a href="https://yaml.org/" target="_blank" rel="noopener">å®˜ç½‘</a>æ‰¾åˆ°Pythonçš„æ¨¡å—ï¼Œé€‰äº†ä¸ªæ”¯æŒæœ€æ–°<code>yaml</code>1.2çš„<a href="https://pypi.org/project/ruamel.yaml/" target="_blank" rel="noopener">ruamel.ymal</a>ç”¨ç€äº†</p><blockquote><h1 id="ruamel-yaml-Examples"><a href="#ruamel-yaml-Examples" class="headerlink" title="ruamel.yaml Examples"></a>ruamel.yaml Examples</h1><p>Basic round trip of parsing YAML to Python objects, modifying and generating YAML:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">import</span> sys</span><br><span class="line">&gt; <span class="keyword">from</span> ruamel.yaml <span class="keyword">import</span> YAML</span><br><span class="line">&gt; </span><br><span class="line">&gt; inp = <span class="string">"""\</span></span><br><span class="line"><span class="string">&gt; # example</span></span><br><span class="line"><span class="string">&gt; name:</span></span><br><span class="line"><span class="string">&gt; # details</span></span><br><span class="line"><span class="string">&gt; family: Smith   # very common</span></span><br><span class="line"><span class="string">&gt; given: Alice    # one of the siblings</span></span><br><span class="line"><span class="string">&gt; """</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; yaml = YAML()</span><br><span class="line">&gt; code = yaml.load(inp)</span><br><span class="line">&gt; code[<span class="string">'name'</span>][<span class="string">'given'</span>] = <span class="string">'Bob'</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; yaml.dump(code, sys.stdout)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>Resulting in:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&gt; # example</span></span><br><span class="line"><span class="string">&gt; name:</span></span><br><span class="line"><span class="string">&gt; # details</span></span><br><span class="line"><span class="string">&gt; family: Smith   # very common</span></span><br><span class="line"><span class="string">&gt; given: Bob      # one of the siblings</span></span><br><span class="line"><span class="string">&gt;</span></span><br></pre></td></tr></table></figure></blockquote><p>æƒ³äº†è§£æ›´å¤šå‚è€ƒ<a href="https://yaml.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">ruamel.yamlæ–‡æ¡£</a></p><p><del>å…¶å®åªæœ‰ä¸€ç‚¹é…ç½®ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡æ›´æ–¹ä¾¿â€¦ç¡¬ç¼–ç ä¹Ÿä¸æ˜¯ä¸å¯ä»¥æ¥å—emmm</del></p><p>ä¹Ÿç®—æ˜¯å­¦ä¹ äº†ä¸€ç§ä½¿ç”¨é…ç½®æ–‡ä»¶çš„æ–¹æ³•å§</p><p>å…ˆåœ¨<code>config.yaml</code>é‡Œé¢å†™å…¥</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># config.yaml</span></span><br><span class="line"><span class="attr">token:</span> <span class="string">ä½ è‡ªå·±çš„token</span></span><br></pre></td></tr></table></figure><h3 id="å¤§è‡´æµç¨‹"><a href="#å¤§è‡´æµç¨‹" class="headerlink" title="å¤§è‡´æµç¨‹"></a>å¤§è‡´æµç¨‹</h3><h4 id="é¦–å…ˆè‡ªç„¶æ˜¯å¯¼å…¥å„ç§æ¨¡å—å•¦"><a href="#é¦–å…ˆè‡ªç„¶æ˜¯å¯¼å…¥å„ç§æ¨¡å—å•¦" class="headerlink" title="é¦–å…ˆè‡ªç„¶æ˜¯å¯¼å…¥å„ç§æ¨¡å—å•¦"></a>é¦–å…ˆè‡ªç„¶æ˜¯å¯¼å…¥å„ç§æ¨¡å—å•¦</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># main.py</span></span><br><span class="line"><span class="keyword">from</span> telegram.ext <span class="keyword">import</span> Updater, CommandHandler</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> ruamel.yaml <span class="keyword">import</span> YAML</span><br><span class="line"><span class="keyword">import</span> psutil</span><br></pre></td></tr></table></figure><h4 id="Updaterå’ŒDispatcher"><a href="#Updaterå’ŒDispatcher" class="headerlink" title="Updaterå’ŒDispatcher"></a>Updaterå’ŒDispatcher</h4><p>æ¥ç€æˆ‘ä»¬éœ€è¦ä¸¤ä¸ªç±»ç›¸äº’é…åˆæ¥å®Œæˆbotçš„è¿ä½œ</p><p>ä¸€ä¸ª<code>Updater</code>ï¼Œå¦ä¸€ä¸ª<code>Dispatcher</code></p><p>å‰è€…ä¸æ–­çš„æ¥å—æ¥è‡ªTelegramçš„ä¿¡æ¯å¹¶ä¸”å°†è¿™äº›ä¼ é€’åˆ°<code>Dispatcher</code>ï¼Œå½“ä½ åˆ›å»ºå¥½ä¸€ä¸ª<code>Updater</code>åä¼šè‡ªåŠ¨ä¹Ÿä¼šåˆ›å»ºå¥½åŒå±äºä¸€ä¸ªé˜Ÿåˆ—çš„<code>Dispatcher</code></p><p>åœ¨<code>Dispatcher</code>ä¸­æˆ‘ä»¬å¯ä»¥æ³¨å†Œå„ç§<code>handler</code>ï¼Œè¿™æ ·<code>Updater</code>ä¸­çš„æ•°æ®å°±ä¼šè¢«<code>handler</code>æ‰€å¤„ç†ï¼Œå¹¶ä¸”å°†å¤„ç†åçš„ä¿¡æ¯ä¼ é€’ç»™ä½ æ‰€æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­å»</p><p>æ‰€ä»¥æˆ‘ä»¬è¿™æ ·å°±å…ˆè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„<code>token</code>ï¼Œå¹¶ä¸”åœ¨æœ¬åœ°ä¸Šä½¿ç”¨ä»£ç†ï¼Œåˆ›å»ºå¥½<code>Updater</code>å’Œ<code>Dispatcher</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># main.py</span></span><br><span class="line"><span class="comment"># è¯»å–config.yamlé…ç½®æ–‡ä»¶</span></span><br><span class="line">yaml = YAML()</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'config.yaml'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    config = yaml.load(f)</span><br><span class="line"></span><br><span class="line">TOKEN = config[<span class="string">'token'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ¬åœ°ä½¿ç”¨httpä»£ç†,å›½å¤–æœåŠ¡å™¨å¯ä»¥ä¸ç”¨è®¾ç½®</span></span><br><span class="line">REQUEST_KWARGS = &#123;</span><br><span class="line">    <span class="string">'proxy_url'</span>: <span class="string">'http://127.0.0.1:1087'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">updater = Updater(TOKEN, request_kwargs=REQUEST_KWARGS)</span><br><span class="line">dispatcher = updater.dispatcher</span><br></pre></td></tr></table></figure><p>ä¸ºäº†çŸ¥é“åœ¨æ­¤è¿è¡Œä¸­å‡ºç°äº†ä»€ä¹ˆé”™è¯¯ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨<code>logging</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é”™è¯¯è°ƒè¯•</span></span><br><span class="line">logging.basicConfig(format=<span class="string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span>,</span><br><span class="line">                    level=logging.INFO)</span><br></pre></td></tr></table></figure><p>æ—¥å¸¸æˆ‘ä»¬ä¹Ÿå¯ä»¥ä»<code>print</code>è½¬å‘<code>logging</code>æ¥å¤„ç†é”™è¯¯ä¿¡æ¯ï¼Œ<a href="https://cuiqingcai.com/6080.html" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>å…·ä½“çš„ä»‹ç»äº†ä¸‹<code>logging</code></p><h4 id="ç¼–å†™å¹¶æ³¨å†Œå›è°ƒå‡½æ•°"><a href="#ç¼–å†™å¹¶æ³¨å†Œå›è°ƒå‡½æ•°" class="headerlink" title="ç¼–å†™å¹¶æ³¨å†Œå›è°ƒå‡½æ•°"></a>ç¼–å†™å¹¶æ³¨å†Œå›è°ƒå‡½æ•°</h4><p>æˆ‘ä»¬å…ˆæ¥ç®€å•å†™ä¸ªæ‰“æ‹›å‘¼çš„ï¼Œä¸ºäº†æµ‹è¯•ä»¥ä¸Šçš„æ“ä½œæ˜¯å¦æ— è¯¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start</span><span class="params">(bot, update)</span>:</span></span><br><span class="line">    bot.send_message(chat_id=update.message.chat_id, text=<span class="string">"I'm a bot"</span>)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªbotç±»å‹å°±æ˜¯<code>telegram.Bot</code>ï¼Œé‡Œé¢çš„å„ç§å‡½æ•°å‚è§<a href="https://python-telegram-bot.readthedocs.io/en/latest/telegram.bot.html?highlight=end_message#" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><p>æœ‰å…³send_messageè¿˜æ˜¯çœ‹<a href="https://core.telegram.org/bots/api#sendmessage" target="_blank" rel="noopener">æ–‡æ¡£</a>å»å§</p><p>æ³¨å†Œä¸ª<code>handler</code>å°†<code>start</code>è®¾ä¸ºå›è°ƒå‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start_handler = CommandHandler(<span class="string">'start'</span>, start)</span><br><span class="line">dispatcher.add_handler(start_handler)</span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™å°±ä»£è¡¨å½“å‘æœºå™¨äººå‘é€<code>/start</code>å¼å°±ä¼šè°ƒç”¨startå‡½æ•°äº†</p><p>å¦‚æœæˆ‘ä»¬éœ€è¦æœ‰å‘½ä»¤å‚æ•°æ€ä¹ˆåŠå‘¢ï¼Œå¯ä»¥ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dispatcher.add_handler(CommandHandler(<span class="string">'start'</span>, start,pass_args=<span class="literal">True</span>))</span><br></pre></td></tr></table></figure><p><code>start</code>å‡½æ•°ä¹Ÿéœ€è¦æ·»åŠ ä¸ª<code>agrs</code>å‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start</span><span class="params">(bot, update, args)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> args:</span><br><span class="line">        bot.send_message(chat_id=update.message.chat_id, text=<span class="string">"Hi &#123;&#125;, I'm a bot"</span>.format(args[<span class="number">0</span>]))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        bot.send_message(chat_id=update.message.chat_id, text=<span class="string">"Hi , I'm a bot"</span>)</span><br></pre></td></tr></table></figure><p>ä¸€åˆ‡éƒ½å‡†å¤‡å¥½åæœ€åä¸€è¡Œç”¨æ¥å¯åŠ¨bot</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">updater.start_polling()</span><br></pre></td></tr></table></figure><p>è¿™æ ·å½“æˆ‘ä»¬ä½¿ç”¨<code>/start ratdis</code>æ—¶å°±ä¼šå›å¤<code>Hi ratdis, I&#39;m a bot</code>å•¦</p><h4 id="æ¥å¼ å˜´ï¼Œåƒä¸‹è¿™é¢—è¯­æ³•ç³–å§-è£…é¥°å™¨"><a href="#æ¥å¼ å˜´ï¼Œåƒä¸‹è¿™é¢—è¯­æ³•ç³–å§-è£…é¥°å™¨" class="headerlink" title="æ¥å¼ å˜´ï¼Œåƒä¸‹è¿™é¢—è¯­æ³•ç³–å§(è£…é¥°å™¨)"></a>æ¥å¼ å˜´ï¼Œåƒä¸‹è¿™é¢—è¯­æ³•ç³–å§(è£…é¥°å™¨)</h4><p>æ¯æ¬¡éƒ½è¦å…ˆåˆ›å»ºä¸ªhandlerå†add_handler</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è£…é¥°å™¨æ¥ä¼˜åŒ–ä¸€ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™é‡Œæˆ‘ä»¬ç”¨ä¸ªè£…é¥°å™¨æ¥é¿å…æ¯ä¸ªå‘½ä»¤éƒ½éœ€è¦æ‰‹åŠ¨æ³¨å†Œ</span></span><br><span class="line"><span class="comment"># é»˜è®¤ä¸æ¥å—å‘½ä»¤å‚æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">command</span><span class="params">(handler, cmd, pass_args=False, **kw)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorater</span><span class="params">(func)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">            <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> pass_args:</span><br><span class="line">            func_hander = handler(cmd, func, pass_args=<span class="literal">True</span>, **kw)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            func_hander = handler(cmd, func, **kw)</span><br><span class="line">        dispatcher.add_handler(func_hander)</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> decorater</span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬åªè¦åœ¨<code>start</code>å‡½æ•°ä¹‹å‰åŠ ä¸€è¡Œå°±å®Œæˆäº†æ³¨å†Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@command(CommandHandler, 'start', pass_args=True)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start</span><span class="params">(bot, update, args)</span>:</span></span><br><span class="line">    ......</span><br></pre></td></tr></table></figure><p>ä¸€ç¯‡ä¸é”™çš„è£…é¥°å™¨ä»‹ç»<a href="https://foofish.net/python-decorator.html" target="_blank" rel="noopener">æ–‡ç« </a></p><h4 id="ä½¿ç”¨psutilè·å–æœåŠ¡å™¨è¿è¡Œä¿¡æ¯"><a href="#ä½¿ç”¨psutilè·å–æœåŠ¡å™¨è¿è¡Œä¿¡æ¯" class="headerlink" title="ä½¿ç”¨psutilè·å–æœåŠ¡å™¨è¿è¡Œä¿¡æ¯"></a>ä½¿ç”¨psutilè·å–æœåŠ¡å™¨è¿è¡Œä¿¡æ¯</h4><p>è¿™é‡Œæˆ‘ä»¬å°±ä»¥è·å–CPUåˆ©ç”¨ç‡ä¸ºä¾‹å§</p><p>åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†<code>config.yaml</code>ä¸­<code>cpu_check_times</code>å’Œ<code>cpu_check_interval</code></p><p>æ‰€ä»¥å…ˆå°†<code>config.yaml</code>æ”¹æˆ</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">token:</span> <span class="string">ä½ è‡ªå·±çš„token</span></span><br><span class="line"><span class="attr">cpu:</span></span><br><span class="line">  <span class="comment"># æ£€æµ‹CPUåˆ©ç”¨ç‡çš„æ¬¡æ•°</span></span><br><span class="line"><span class="attr">  cpu_check_times:</span> <span class="number">5</span></span><br><span class="line">  <span class="comment"># æ£€æµ‹CPUåˆ©ç”¨ç‡çš„é—´éš”(å•ä½ä¸ºç§’)</span></span><br><span class="line"><span class="attr">  cpu_check_interval:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p><code>server</code>å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@command(CommandHandler, 'server')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">server</span><span class="params">(bot, update)</span>:</span></span><br><span class="line">    <span class="comment"># æ£€æµ‹CPUåˆ©ç”¨ç‡çš„æ¬¡æ•°</span></span><br><span class="line">    CPU_CHECK_TIMES = config[<span class="string">'cpu'</span>][<span class="string">'cpu_check_times'</span>]</span><br><span class="line">    <span class="comment"># æ£€æµ‹CPUåˆ©ç”¨ç‡çš„é—´éš”(å•ä½ä¸ºç§’)</span></span><br><span class="line">    CPU_CHECK_INTERVAL = config[<span class="string">'cpu'</span>][<span class="string">'cpu_check_interval'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”¨æ¥ä¿å­˜æ¯æ¬¡æ£€æµ‹CPUåˆ©ç”¨ç‡çš„ç»“æœ</span></span><br><span class="line">    cpu_check_list = [<span class="number">0</span>] * psutil.cpu_count()</span><br><span class="line">    result = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> CPU_CHECK_TIMES:</span><br><span class="line">        <span class="comment"># æ£€æµ‹é€»è¾‘CPUçš„å ç”¨ç‡,å°†ç»“æœå…ƒç´ ç›¸åŠ åˆ°cpu_check_listä¸­</span></span><br><span class="line">        cpu_check_list = [a + b <span class="keyword">for</span> a, b <span class="keyword">in</span></span><br><span class="line">                          zip(psutil.cpu_percent(interval=CPU_CHECK_INTERVAL, percpu=<span class="literal">True</span>), cpu_check_list)]</span><br><span class="line">        CPU_CHECK_TIMES -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†ç›¸åŠ ç»“æœå–å¹³å‡å€¼å¹¶ä¸”è½¬åŒ–ä¸ºç™¾åˆ†æ¯”%æ ¼å¼</span></span><br><span class="line">    cpu_check_list = [<span class="string">'&#123;:.2f&#125;%'</span>.format(float(x / <span class="number">10</span>)) <span class="keyword">for</span> x <span class="keyword">in</span> cpu_check_list]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> num, l <span class="keyword">in</span> enumerate(cpu_check_list):</span><br><span class="line">        result += <span class="string">"CPU&#123;&#125;å¹³å‡å ç”¨&#123;&#125;\n"</span>.format(num + <span class="number">1</span>, l)</span><br><span class="line"></span><br><span class="line">    bot.send_message(chat_id=update.message.chat_id, text=result)</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„è¯ï¼Œå½“æˆ‘ä»¬è¾“å…¥<code>/server</code>æ—¶å°±ä¼šå›å¤ç±»ä¼¼äºè¿™æ ·çš„</p><blockquote><p>CPU1å¹³å‡å ç”¨22.02%<br>CPU2å¹³å‡å ç”¨11.65%<br>CPU3å¹³å‡å ç”¨19.95%<br>CPU4å¹³å‡å ç”¨11.09%</p></blockquote><p>å½“ç„¶psutilè¿˜æä¾›äº†å¾ˆå¤šå¥½ç”¨çš„å‡½æ•°æ¥è·å–å„ç§ä¸ªæ ·çš„æœåŠ¡å™¨è¿è¡Œä¿¡æ¯ï¼Œ<a href="https://psutil.readthedocs.io/en/latest/" target="_blank" rel="noopener">psutilæ–‡æ¡£</a></p><h2 id="æœ¬åœ°ä¸Šçº¿åˆ°æœåŠ¡å™¨"><a href="#æœ¬åœ°ä¸Šçº¿åˆ°æœåŠ¡å™¨" class="headerlink" title="æœ¬åœ°ä¸Šçº¿åˆ°æœåŠ¡å™¨"></a>æœ¬åœ°ä¸Šçº¿åˆ°æœåŠ¡å™¨</h2><p>å–æ¶ˆä»£ç†(å›½å¤–æœåŠ¡å™¨)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœ¬åœ°ä½¿ç”¨httpä»£ç†</span></span><br><span class="line"><span class="comment">#REQUEST_KWARGS = &#123;</span></span><br><span class="line"><span class="comment">#    'proxy_url': 'http://127.0.0.1:1087',</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#updater = Updater(TOKEN, request_kwargs=REQUEST_KWARGS)</span></span><br><span class="line">updater = Updater(TOKEN)</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘ä»¬ä¸€ç›´éƒ½æ˜¯åå°è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦å°†é”™è¯¯ä¿¡æ¯è¾“å‡ºåˆ°åˆ°logæ–‡ä»¶ä¸­å»ï¼Œä¿®æ”¹ä¸€ä¸‹loggingçš„ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  é”™è¯¯è°ƒè¯•</span></span><br><span class="line">logging.basicConfig(level=logging.INFO,</span><br><span class="line">                    filename=<span class="string">'TGbot.log'</span>,</span><br><span class="line">                    datefmt=<span class="string">'%Y/%m/%d %H:%M:%S'</span>,</span><br><span class="line">                    format=<span class="string">'%(asctime)s - %(name)s - %(levelname)s - %(lineno)d - %(module)s - %(message)s'</span>)</span><br><span class="line">logger = logging.getLogger(__name__)</span><br><span class="line"><span class="comment"># logging.basicConfig(format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',</span></span><br><span class="line"><span class="comment">#                     level=logging.INFO)</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å‡ºé”™ä¿¡æ¯å°±å¯ä»¥å»<code>TGbot.log</code>ä¸­å»çœ‹äº†</p><p>æœ€åä½¿ç”¨<code>nohup</code>ä¸€ç›´åœ¨åå°è¿è¡Œå°±å¥½å•¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup python3 main.py</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™æ¬¡ç®€å•çš„å†™äº†ä¸€ç‚¹å…³äºbotçš„ä¸œè¥¿ï¼Œè¿˜æœ‰å¾ˆå¤šç‰¹æ€§éƒ½æ²¡æœ‰æ€ä¹ˆè¯´ï¼Œæƒ³è¿›ä¸€æ­¥äº†è§£çš„å®Œå…¨å¯ä»¥å»çœ‹æ–‡æ¡£</p><p>è¿™ä¸ªç›‘æ§botä¹Ÿæœ‰å¾ˆå¤§çš„è¿›æ­¥ç©ºé—´ï¼Œå¤§å®¶å®Œå…¨å¯ä»¥åšä¸ªå…¨é¢çš„æœåŠ¡å™¨ç›‘æ§Botå‡ºæ¥</p><p>åˆ©ç”¨å¥½botçš„æ–¹ä¾¿æ€§ï¼Œå¯ä»¥å¾ˆå¥½çš„ç®¡ç†æœåŠ¡å™¨ï¼Œç”šè‡³æ˜¯æ¨é€å„ç±»æ¶ˆæ¯ï¼Œæ¨å‡ºä»˜è´¹åŠŸèƒ½ä¹‹ç±»çš„</p><h2 id="æ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆæ‰“ç®—"><a href="#æ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆæ‰“ç®—" class="headerlink" title="æ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆæ‰“ç®—"></a>æ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆæ‰“ç®—</h2><p>åº”è¯¥ä¼šæœ‰ä¸€æ®µè¾ƒé•¿çš„æ—¶é—´ä¸æ›´æ–°åšæ–‡äº†ï¼Œå¥½å¥½åˆ©ç”¨ä¸‹å‡æœŸå†™ç‚¹å°ç©æ„ï¼Œå—¯ï¼Œå°±è¿™æ ·å§</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;a href=&quot;#å†™åœ¨å‰é¢&quot; class=&quot;headerlink&quot; title=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;/a&gt;å†™åœ¨å‰é¢&lt;/h2&gt;&lt;p&gt;æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ç”¨Pythonç©ä¸‹Telegramä¸­çš„Botå§&lt;/p&gt;
&lt;p&gt;å®ç°ä¸€ä¸ªå®æ—¶æŸ¥è¯¢æœåŠ¡å™¨C
      
    
    </summary>
    
      <category term="program" scheme="https://ratdis.github.io/categories/program/"/>
    
    
      <category term="python" scheme="https://ratdis.github.io/tags/python/"/>
    
      <category term="telegram" scheme="https://ratdis.github.io/tags/telegram/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•ç¬”è®° å£¹</title>
    <link href="https://ratdis.github.io/2018/12/18/algorithm-note-1/"/>
    <id>https://ratdis.github.io/2018/12/18/algorithm-note-1/</id>
    <published>2018-12-18T09:17:17.000Z</published>
    <updated>2019-03-26T14:30:29.711Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>ä»¥åä¼šé™†é™†ç»­ç»­å†™ä¸€äº›å…³äºç®—æ³•çš„ç¬”è®°ï¼Œæ¬¢è¿äº¤æµå­¦ä¹ </p><p>å­¦ä¹ è§†é¢‘<a href="https://bt.byr.cn/details.php?id=116211&amp;hit=1" target="_blank" rel="noopener">ä¸‹è½½</a>(åŒ—é‚®äººBTï¼Œéœ€IPV6è®¿é—®)</p><p>Cè¯­è¨€æè¿°</p><h2 id="é€’æ¨ç®—æ³•"><a href="#é€’æ¨ç®—æ³•" class="headerlink" title="é€’æ¨ç®—æ³•"></a>é€’æ¨ç®—æ³•</h2><h3 id="é¡ºæ¨æ³•"><a href="#é¡ºæ¨æ³•" class="headerlink" title="é¡ºæ¨æ³•"></a>é¡ºæ¨æ³•</h3><blockquote><p>ä»å·²çŸ¥æ¡ä»¶å‡ºå‘ï¼Œæ¨å‡ºæœ€åç»“æœ</p></blockquote><h4 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><p>ä¸€å¯¹å…”å­ï¼Œä»å‡ºç”Ÿåç¬¬3ä¸ªæœˆèµ·æ¯ä¸ªæœˆéƒ½ç”Ÿä¸€å¯¹å…”å­ã€‚å°å…”å­é•¿åˆ°ç¬¬3ä¸ªæœˆåç«‹é©¬ç”Ÿä¸€å¯¹ä¸”ä»¥åæ¯ä¸ªæœˆåˆç”Ÿä¸€å¯¹å…”å­ã€‚å‡å¦‚å…”å­éƒ½ä¸æ­»ï¼Œç¬¬ä¸€ä¸ªæœˆæœ‰ä¸€å¯¹ä¸€ä¸ªæœˆå¤§çš„å…”å­ï¼Œè¯·ç®—å‡º12æœˆåˆæ—¶ä¸€å…±æœ‰å¤šå°‘å¯¹å…”å­ï¼Ÿ</p><h4 id="æ€è·¯åˆ†æ-amp-å®ç°ä»£ç "><a href="#æ€è·¯åˆ†æ-amp-å®ç°ä»£ç " class="headerlink" title="æ€è·¯åˆ†æ&amp;å®ç°ä»£ç "></a>æ€è·¯åˆ†æ&amp;å®ç°ä»£ç </h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MONTHS 13</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> num[MONTHS]=&#123;<span class="number">0</span>,<span class="number">1</span>&#125;;<span class="comment">//è®°å½•MONTHSæœˆçš„å…”å­å¯¹æ•°num[1]æŒ‡ç¬¬ä¸€ä¸ªæœˆçš„å…”å­æ€»å¯¹æ•°ï¼Œä»¥æ­¤ç±»æ¨</span></span><br><span class="line"><span class="keyword">int</span> grow[<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>&#125;;<span class="comment">//è®°å½•æ¯ç§ç”Ÿé•¿ç¨‹åº¦çš„å…”å­å¯¹æ•°grow[1]æŒ‡ä¸€ä¸ªæœˆå¤§çš„å¯¹æ•°ï¼Œä»¥æ­¤ç±»æ¨</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">new</span>;<span class="comment">//è¯¥æœˆæ–°å¢çš„å…”å­å¯¹æ•°</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; MONTHS; i++)</span><br><span class="line">&#123;</span><br><span class="line">        <span class="comment">//å…”å­å¯¹æ•°å’Œç”Ÿé•¿ç¨‹åº¦å˜åŒ–</span></span><br><span class="line">grow[<span class="number">3</span>] += grow[<span class="number">2</span>];</span><br><span class="line"><span class="keyword">new</span> = grow[<span class="number">3</span>];</span><br><span class="line">grow[<span class="number">2</span>] = grow[<span class="number">1</span>];</span><br><span class="line">grow[<span class="number">1</span>] = <span class="keyword">new</span>;</span><br><span class="line">num[i] = grow[<span class="number">1</span>] + grow[<span class="number">2</span>] + grow[<span class="number">3</span>];</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"å½“å‰%dæœˆåˆ\nä¸€ä¸ªæœˆå¤§çš„æœ‰%dåªï¼Œä¸¤ä¸ªæœˆå¤§çš„æœ‰%dåªï¼Œä¸‰ä¸ªæœˆå¤§çš„æœ‰%dåª\n"</span>, i, grow[<span class="number">1</span>], grow[<span class="number">2</span>], grow[<span class="number">3</span>]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"æ€»è®¡%dåª\n\n"</span>, num[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰2æœˆåˆ</span></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæœˆå¤§çš„æœ‰0åªï¼Œä¸¤ä¸ªæœˆå¤§çš„æœ‰1åªï¼Œä¸‰ä¸ªæœˆå¤§çš„æœ‰0åª</span></span><br><span class="line"><span class="comment">// æ€»è®¡1åª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰3æœˆåˆ</span></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæœˆå¤§çš„æœ‰1åªï¼Œä¸¤ä¸ªæœˆå¤§çš„æœ‰0åªï¼Œä¸‰ä¸ªæœˆå¤§çš„æœ‰1åª</span></span><br><span class="line"><span class="comment">// æ€»è®¡2åª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰4æœˆåˆ</span></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæœˆå¤§çš„æœ‰1åªï¼Œä¸¤ä¸ªæœˆå¤§çš„æœ‰1åªï¼Œä¸‰ä¸ªæœˆå¤§çš„æœ‰1åª</span></span><br><span class="line"><span class="comment">// æ€»è®¡3åª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰5æœˆåˆ</span></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæœˆå¤§çš„æœ‰2åªï¼Œä¸¤ä¸ªæœˆå¤§çš„æœ‰1åªï¼Œä¸‰ä¸ªæœˆå¤§çš„æœ‰2åª</span></span><br><span class="line"><span class="comment">// æ€»è®¡5åª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰6æœˆåˆ</span></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæœˆå¤§çš„æœ‰3åªï¼Œä¸¤ä¸ªæœˆå¤§çš„æœ‰2åªï¼Œä¸‰ä¸ªæœˆå¤§çš„æœ‰3åª</span></span><br><span class="line"><span class="comment">// æ€»è®¡8åª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰7æœˆåˆ</span></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæœˆå¤§çš„æœ‰5åªï¼Œä¸¤ä¸ªæœˆå¤§çš„æœ‰3åªï¼Œä¸‰ä¸ªæœˆå¤§çš„æœ‰5åª</span></span><br><span class="line"><span class="comment">// æ€»è®¡13åª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰8æœˆåˆ</span></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæœˆå¤§çš„æœ‰8åªï¼Œä¸¤ä¸ªæœˆå¤§çš„æœ‰5åªï¼Œä¸‰ä¸ªæœˆå¤§çš„æœ‰8åª</span></span><br><span class="line"><span class="comment">// æ€»è®¡21åª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰9æœˆåˆ</span></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæœˆå¤§çš„æœ‰13åªï¼Œä¸¤ä¸ªæœˆå¤§çš„æœ‰8åªï¼Œä¸‰ä¸ªæœˆå¤§çš„æœ‰13åª</span></span><br><span class="line"><span class="comment">// æ€»è®¡34åª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰10æœˆåˆ</span></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæœˆå¤§çš„æœ‰21åªï¼Œä¸¤ä¸ªæœˆå¤§çš„æœ‰13åªï¼Œä¸‰ä¸ªæœˆå¤§çš„æœ‰21åª</span></span><br><span class="line"><span class="comment">// æ€»è®¡55åª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰11æœˆåˆ</span></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæœˆå¤§çš„æœ‰34åªï¼Œä¸¤ä¸ªæœˆå¤§çš„æœ‰21åªï¼Œä¸‰ä¸ªæœˆå¤§çš„æœ‰34åª</span></span><br><span class="line"><span class="comment">// æ€»è®¡89åª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰12æœˆåˆ</span></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæœˆå¤§çš„æœ‰55åªï¼Œä¸¤ä¸ªæœˆå¤§çš„æœ‰34åªï¼Œä¸‰ä¸ªæœˆå¤§çš„æœ‰55åª</span></span><br><span class="line"><span class="comment">// æ€»è®¡144åª</span></span><br></pre></td></tr></table></figure><p>å¦‚æœäº†è§£åˆ°è¿™é¢˜è€ƒçš„æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—çš„è¯ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨<code>è¯¥é¡¹çš„å€¼ç­‰äºå‰ä¸¤é¡¹çš„å’Œ</code>è¿™ä¸ªç»“è®º</p><h3 id="é€†æ¨æ³•"><a href="#é€†æ¨æ³•" class="headerlink" title="é€†æ¨æ³•"></a>é€†æ¨æ³•</h3><blockquote><p>ä»å·²çŸ¥ç»“æœå‡ºå‘ï¼Œæ¨å‡ºæœ€åˆæ¡ä»¶</p></blockquote><h4 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><p>å‡è®¾é“¶è¡Œçš„æœˆåˆ©æ¯æ˜¯1.71%ï¼Œç°åœ¨æŸäººæ‰“ç®—å…ˆå­˜ä¸€ç¬”é’±ï¼Œå››å¹´åè¿æœ¬å¸¦æ¯ä¸€å…±1000å–å‡ºï¼Œè¯·é—®æœ€åˆåº”è¯¥å­˜å¤šå°‘é’±ï¼Ÿ</p><h4 id="æ€è·¯åˆ†æ-amp-å®ç°ä»£ç -1"><a href="#æ€è·¯åˆ†æ-amp-å®ç°ä»£ç -1" class="headerlink" title="æ€è·¯åˆ†æ&amp;å®ç°ä»£ç "></a>æ€è·¯åˆ†æ&amp;å®ç°ä»£ç </h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NUM 48</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RATE 0.0171</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">double</span> money = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">48</span>; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">&#123;</span><br><span class="line">money = money / (<span class="number">1</span> + RATE);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"æœ€åˆå­˜%få…ƒå³å¯\n"</span>, money);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æœ€åˆå­˜443.143714å…ƒå³å¯</span></span><br></pre></td></tr></table></figure><p>æ²¡å•¥è¯´çš„â€¦</p><h2 id="æšä¸¾-ç©·ä¸¾-ç®—æ³•"><a href="#æšä¸¾-ç©·ä¸¾-ç®—æ³•" class="headerlink" title="æšä¸¾(ç©·ä¸¾)ç®—æ³•"></a>æšä¸¾(ç©·ä¸¾)ç®—æ³•</h2><blockquote><p>ä»æ‰€æœ‰å€™é€‰ç­”æ¡ˆä¸­ä¸€ä¸ªä¸€ä¸ªå°è¯•æ˜¯å¦ç¬¦åˆè¦æ±‚(æš´åŠ›)<del>æ— è„‘</del></p></blockquote><h4 id="å®ä¾‹-2"><a href="#å®ä¾‹-2" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><p>ç»™å®šäº”ä¸ªæ•°åœ¨å®ƒä»¬ä¸­é—´ä»»æ„ä½¿ç”¨åŠ å‡ä¹˜é™¤ï¼Œä¸èƒ½ç”¨æ‹¬å·ï¼Œè®¡ç®—å‡ºç›®æ ‡å€¼æœ‰å“ªäº›æ–¹æ³•</p><p>ä¾‹å¦‚ 5 5 5 5 5 = 5</p><p>å…¶ä¸­ä¸€ç§è§£5+5+5-5-5=5</p><h4 id="æ€è·¯åˆ†æ-amp-å®ç°ä»£ç -2"><a href="#æ€è·¯åˆ†æ-amp-å®ç°ä»£ç -2" class="headerlink" title="æ€è·¯åˆ†æ&amp;å®ç°ä»£ç "></a>æ€è·¯åˆ†æ&amp;å®ç°ä»£ç </h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">double</span> num[<span class="number">6</span>] = &#123;<span class="number">0</span>&#125;;<span class="comment">//ç­‰å¼å·¦è¾¹çš„äº”ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">double</span> target = <span class="number">0</span>;<span class="comment">//ç­‰å¼çš„é¢„æœŸç»“æœ</span></span><br><span class="line"><span class="keyword">char</span> raw_symbol[<span class="number">5</span>] = &#123;<span class="string">' '</span>, <span class="string">'+'</span>, <span class="string">'-'</span>, <span class="string">'*'</span>, <span class="string">'/'</span>&#125;;<span class="comment">//å¯ä¾›é€‰æ‹©çš„è¿ç®—ç¬¦</span></span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;<span class="comment">//è®°å½•æœ‰å¤šå°‘ç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//5ä¸ªæ•°ä½¿ç”¨åˆ°äº†4ä¸ªè¿ç®—ç¬¦ï¼Œnow_symbol[1]è¡¨ç¤ºç¬¬ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå…¶èµ‹äºˆçš„å€¼å¯¹åº”ç€raw_symbolä¸­çš„è¿ç®—ç¬¦ï¼Œä¸º1å°±ä¸º+ï¼Œä»¥æ­¤ç±»æ¨</span></span><br><span class="line"><span class="keyword">int</span> now_symbol[<span class="number">5</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"è¯·è¾“å…¥ç­‰å¼å·¦è¾¹çš„äº”ä¸ªæ•°\n"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%lf"</span>, &amp;num[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"è¯·è¾“å…¥ç­‰å¼çš„é¢„æœŸç»“æœ\n"</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%lf"</span>, &amp;target);</span><br><span class="line"><span class="keyword">for</span> (now_symbol[<span class="number">1</span>] = <span class="number">1</span>; now_symbol[<span class="number">1</span>] &lt;= <span class="number">4</span>; now_symbol[<span class="number">1</span>]++)<span class="comment">//æšä¸¾ç¬¬ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œä¸‹åŒ</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>((now_symbol[<span class="number">1</span>] != <span class="number">4</span>) || (num[<span class="number">2</span>] != <span class="number">0</span>))<span class="comment">//åˆ¤æ–­è¿ç®—ç¬¦æ˜¯ä¸æ˜¯'/', å¦‚æœæ˜¯'/'çš„è¯å†æ£€æŸ¥é™¤æ•°æ˜¯å¦ä¸º0, ä¸‹åŒ</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (now_symbol[<span class="number">2</span>] = <span class="number">1</span>; now_symbol[<span class="number">2</span>] &lt;= <span class="number">4</span>; now_symbol[<span class="number">2</span>]++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>((now_symbol[<span class="number">2</span>] != <span class="number">4</span>) || (num[<span class="number">3</span>] != <span class="number">0</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (now_symbol[<span class="number">3</span>] = <span class="number">1</span>; now_symbol[<span class="number">3</span>] &lt;= <span class="number">4</span>; now_symbol[<span class="number">3</span>]++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>((now_symbol[<span class="number">3</span>] != <span class="number">4</span>) || (num[<span class="number">3</span>] != <span class="number">0</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (now_symbol[<span class="number">4</span>] = <span class="number">1</span>; now_symbol[<span class="number">4</span>] &lt;= <span class="number">4</span>; now_symbol[<span class="number">4</span>]++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>((now_symbol[<span class="number">4</span>] != <span class="number">4</span>) || (num[<span class="number">4</span>] != <span class="number">0</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//ç”±äºè¿ç®—ç¬¦ä¹‹é—´è¿˜æœ‰ä¼˜å…ˆçº§ï¼Œä¸èƒ½ç›´æ¥ä»å·¦åˆ°å³è®¡ç®—</span></span><br><span class="line"><span class="comment">//åœ¨è¿™é‡Œæˆ‘ä»¬å¼•ç”¨ä¸¤ä¸ªå˜é‡leftå’Œrightæ¥è®°å½•å³å°†è¿›è¡Œè¿ç®—çš„ä¸¤ä¸ªå˜é‡</span></span><br><span class="line"><span class="comment">//å†å¼•ç”¨ä¸€ä¸ªå˜é‡sign  -1|+1ï¼Œ</span></span><br><span class="line"><span class="keyword">double</span> left = <span class="number">0</span>, right = num[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> sign = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">4</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">switch</span>(raw_symbol[now_symbol[i]])</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è¿™é‡Œçš„ä»£ç æ€è·¯æ˜¯å…ˆè®¡ç®—è¿™æ¬¡è¿ç®—ç¬¦å·¦å³çš„leftå’Œrightï¼Œä½†æ˜¯è¿™æ¬¡å¹¶æ²¡æœ‰æ€¥ç€è¿ç®—â€˜left â€˜+-*/â€™ rightâ€™ï¼Œè€Œæ˜¯çœ‹ä¸‹ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå¦‚æœä¸æ˜¯ä¸º'*'or'/'æ‰è¿›è¡Œleftå’Œrightä¹‹é—´çš„è¿ç®—</span></span><br><span class="line"><span class="comment">//signå°±æ˜¯è®°å½•leftå’Œrightä¹‹é—´æ˜¯+è¿˜æ˜¯-</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">left = left + sign * right;</span><br><span class="line">sign=<span class="number">1</span>;</span><br><span class="line">right = num[i+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">'-'</span>:</span><br><span class="line">left = left + sign * right;</span><br><span class="line">sign = <span class="number">-1</span>;</span><br><span class="line">right = num[i+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">'*'</span>:</span><br><span class="line">right = right * num[i+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">'/'</span>:</span><br><span class="line">right = right / num[i+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> ((left + sign * right) == target)</span><br><span class="line">&#123;</span><br><span class="line">count++;</span><br><span class="line">                                        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>;j &lt;= <span class="number">4</span>;j++)</span><br><span class="line">                                            <span class="built_in">printf</span>(<span class="string">"%f%c"</span>,num[j], raw_symbol[now_symbol[j]]);</span><br><span class="line">                                        <span class="built_in">printf</span>(<span class="string">"%f=%f\n"</span>,num[<span class="number">5</span>], target);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"ä¸€å…±%dç§è§£æ³•\n"</span>, count);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·è¾“å…¥ç­‰å¼å·¦è¾¹çš„äº”ä¸ªæ•°</span></span><br><span class="line"><span class="comment">// 5 5 5 5 5 </span></span><br><span class="line"><span class="comment">// è¯·è¾“å…¥ç­‰å¼çš„é¢„æœŸç»“æœ</span></span><br><span class="line"><span class="comment">// 5</span></span><br><span class="line"><span class="comment">// 5.000000+5.000000+5.000000-5.000000-5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000+5.000000-5.000000+5.000000-5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000+5.000000-5.000000-5.000000+5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000+5.000000-5.000000*5.000000/5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000+5.000000-5.000000/5.000000*5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000+5.000000*5.000000-5.000000*5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000+5.000000*5.000000/5.000000-5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000+5.000000/5.000000-5.000000/5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000+5.000000/5.000000*5.000000-5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000-5.000000+5.000000+5.000000-5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000-5.000000+5.000000-5.000000+5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000-5.000000+5.000000*5.000000/5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000-5.000000+5.000000/5.000000*5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000-5.000000-5.000000+5.000000+5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000-5.000000*5.000000+5.000000*5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000-5.000000*5.000000/5.000000+5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000-5.000000/5.000000+5.000000/5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000-5.000000/5.000000*5.000000+5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000*5.000000+5.000000-5.000000*5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000*5.000000-5.000000*5.000000+5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000*5.000000*5.000000/5.000000/5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000*5.000000/5.000000+5.000000-5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000*5.000000/5.000000-5.000000+5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000*5.000000/5.000000*5.000000/5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000*5.000000/5.000000/5.000000*5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000/5.000000+5.000000-5.000000/5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000/5.000000-5.000000/5.000000+5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000/5.000000*5.000000+5.000000-5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000/5.000000*5.000000-5.000000+5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000/5.000000*5.000000*5.000000/5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000/5.000000*5.000000/5.000000*5.000000=5.000000</span></span><br><span class="line"><span class="comment">// 5.000000/5.000000/5.000000*5.000000*5.000000=5.000000</span></span><br><span class="line"><span class="comment">// ä¸€å…±32ç§è§£æ³•</span></span><br></pre></td></tr></table></figure><h2 id="é€’å½’ç®—æ³•"><a href="#é€’å½’ç®—æ³•" class="headerlink" title="é€’å½’ç®—æ³•"></a>é€’å½’ç®—æ³•</h2><blockquote><p>ç›´æ¥æˆ–é—´æ¥çš„è°ƒç”¨è‡ªå·±çš„ç®—æ³•</p></blockquote><h4 id="å®ä¾‹-3"><a href="#å®ä¾‹-3" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><p>è®¡ç®—é˜¶ä¹˜</p><h4 id="æ€è·¯åˆ†æ-amp-å®ç°ä»£ç -3"><a href="#æ€è·¯åˆ†æ-amp-å®ç°ä»£ç -3" class="headerlink" title="æ€è·¯åˆ†æ&amp;å®ç°ä»£ç "></a>æ€è·¯åˆ†æ&amp;å®ç°ä»£ç </h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fact</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(n == <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> n*fact(n<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"è¾“å…¥n\n"</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%dçš„é˜¶ä¹˜ä¸º%d\n"</span>, n, fact(n));</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å…¥n</span></span><br><span class="line"><span class="comment">//10</span></span><br><span class="line"><span class="comment">//10çš„é˜¶ä¹˜ä¸º3628800</span></span><br></pre></td></tr></table></figure><h2 id="åˆ†æ²»ç®—æ³•"><a href="#åˆ†æ²»ç®—æ³•" class="headerlink" title="åˆ†æ²»ç®—æ³•"></a>åˆ†æ²»ç®—æ³•</h2><blockquote><p>æŠŠä¸€ä¸ªé—®é¢˜åˆ†ä¸ºå¾ˆå¤šä¸ªç›¸åŒç±»å‹çš„å°é—®é¢˜è¿›è¡Œæ±‚è§£ï¼Œæœ€ååˆå¹¶å¤„ç†å°é—®é¢˜çš„è§£æ¥è¾¾åˆ°æœ€ç»ˆé—®é¢˜çš„è§£</p></blockquote><h4 id="å®ä¾‹-4"><a href="#å®ä¾‹-4" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><p>è¾“å…¥å‚èµ›äººæ•°(n=2^k)ï¼Œå®‰æ’æ¯”èµ›æ—¥ç¨‹ï¼Œå¦‚å›¾</p><p><img src="/Users/ratdischen/Desktop/Screen Shot 2018-12-17 at 3.50.04 PM.png" alt="Screen Shot 2018-12-17 at 3.50.04 PM"></p><p>å¾ˆå®¹æ˜“è§‚å¯Ÿå‘ç°çº¢çº¿åˆ’åˆ†çš„åŒºåŸŸå·¦ä¸Šè§’å’Œå³ä¸‹è§’æ˜¯ä¸€æ ·çš„ï¼Œå³ä¸Šè§’å’Œå·¦ä¸‹è§’æ˜¯ä¸€æ ·çš„ï¼Œç›´æ¥ä¸Šä»£ç </p><h4 id="æ€è·¯åˆ†æ-amp-å®ç°ä»£ç -4"><a href="#æ€è·¯åˆ†æ-amp-å®ç°ä»£ç -4" class="headerlink" title="æ€è·¯åˆ†æ&amp;å®ç°ä»£ç "></a>æ€è·¯åˆ†æ&amp;å®ç°ä»£ç </h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">//è¿™é‡Œæˆ‘å®šä¹‰æœ€å¤§äººæ•°ä¸º8</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 8</span></span><br><span class="line"><span class="keyword">int</span> arrangement[MAX+<span class="number">1</span>][MAX+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// start:ä»ç¬¬å‡ ä¸ªäººå¼€å§‹å®‰æ’ï¼Œp_num:å®‰æ’å‡ ä¸ªäºº</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">arrange</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> p_num)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i,j;</span><br><span class="line"><span class="comment">//è§£å†³å°é—®é¢˜(äºŒäººåˆ†ç»„)</span></span><br><span class="line"><span class="keyword">if</span>(p_num == <span class="number">2</span>)&#123;</span><br><span class="line">arrangement[start][<span class="number">1</span>] = start;</span><br><span class="line">arrangement[start][<span class="number">2</span>] = start + <span class="number">1</span>;</span><br><span class="line">arrangement[start + <span class="number">1</span>][<span class="number">1</span>] = start + <span class="number">1</span>;</span><br><span class="line">arrangement[start + <span class="number">1</span>][<span class="number">2</span>] = start;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//å¤§é—®é¢˜åˆ†æˆå°é—®é¢˜(å¤šäººæœ€ç»ˆåˆ†æˆäºŒäºº)</span></span><br><span class="line">arrange(start, p_num/<span class="number">2</span>);</span><br><span class="line">arrange(p_num/<span class="number">2</span> +start, p_num/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ€»ç»“è§„å¾‹è¿›è¡Œåˆå¹¶</span></span><br><span class="line"><span class="comment">//å·¦ä¸‹è§’å¤åˆ¶åˆ°å³ä¸Šè§’</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt;= p_num/<span class="number">2</span>+start+<span class="number">1</span>; i++)&#123;</span><br><span class="line"><span class="keyword">for</span> (j = p_num/<span class="number">2</span> + <span class="number">1</span>; j &lt;= p_num; j++)&#123;</span><br><span class="line">arrangement[i][j] = arrangement[i + p_num/<span class="number">2</span>][j - p_num/<span class="number">2</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å·¦ä¸Šè§’å¤åˆ¶åˆ°å³ä¸‹è§’</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = start + p_num/<span class="number">2</span>; i &lt; start + p_num; i++)&#123;</span><br><span class="line"><span class="keyword">for</span> (j = p_num/<span class="number">2</span> + <span class="number">1</span>; j &lt;= p_num; j++)&#123;</span><br><span class="line">arrangement[i][j] = arrangement[i - p_num/<span class="number">2</span>][j - p_num/<span class="number">2</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"è¯·è¾“å…¥å‚èµ›äººæ•°\n"</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;num);</span><br><span class="line">arrange(<span class="number">1</span>, num);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= num; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= num; j++)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\t"</span>, arrangement[i][j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·è¾“å…¥å‚èµ›äººæ•°</span></span><br><span class="line"><span class="comment">// 8</span></span><br><span class="line"><span class="comment">// 12345678</span></span><br><span class="line"><span class="comment">// 21436587</span></span><br><span class="line"><span class="comment">// 34127856</span></span><br><span class="line"><span class="comment">// 43218765</span></span><br><span class="line"><span class="comment">// 56781234</span></span><br><span class="line"><span class="comment">// 65872143</span></span><br><span class="line"><span class="comment">// 78563412</span></span><br><span class="line"><span class="comment">// 87654321</span></span><br></pre></td></tr></table></figure><h2 id="è´ªå©ªç®—æ³•"><a href="#è´ªå©ªç®—æ³•" class="headerlink" title="è´ªå©ªç®—æ³•"></a>è´ªå©ªç®—æ³•</h2><blockquote><p>æ˜¯ä¸€ç§åœ¨æ¯ä¸€æ­¥é€‰æ‹©ä¸­éƒ½é‡‡å–åœ¨å½“å‰çŠ¶æ€ä¸‹æœ€å¥½æˆ–æœ€ä¼˜ï¼ˆå³æœ€æœ‰åˆ©ï¼‰çš„é€‰æ‹©ï¼Œä»è€Œå¸Œæœ›å¯¼è‡´ç»“æœæ˜¯æœ€å¥½æˆ–æœ€ä¼˜çš„ç®—æ³•</p></blockquote><h4 id="å®ä¾‹-5"><a href="#å®ä¾‹-5" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><p>åˆ†é’±é—®é¢˜</p><h4 id="æ€è·¯åˆ†æ-amp-å®ç°ä»£ç -5"><a href="#æ€è·¯åˆ†æ-amp-å®ç°ä»£ç -5" class="headerlink" title="æ€è·¯åˆ†æ&amp;å®ç°ä»£ç "></a>æ€è·¯åˆ†æ&amp;å®ç°ä»£ç </h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;float.h&gt;</span></span></span><br><span class="line"><span class="comment">//è¿™é‡Œå®šä¹‰äº†9ç§é’±å¸å¤§å°,ä»¥åˆ†ä¸ºå•ä½,ä»å¤§åˆ°å°æ’åˆ—</span></span><br><span class="line"><span class="keyword">int</span> cash[<span class="number">10</span>] = &#123;<span class="number">0</span>, <span class="number">10000</span>, <span class="number">5000</span>, <span class="number">1000</span>, <span class="number">500</span>, <span class="number">200</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">20</span>, <span class="number">10</span>&#125;;</span><br><span class="line"><span class="comment">//è®°å½•æ¯ç§é’±å¸çš„å¼ æ•°num[1] = 1å°±ä»£è¡¨ä¸€å¼ ä¸€ç™¾</span></span><br><span class="line"><span class="keyword">int</span> num[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exchange</span><span class="params">(<span class="keyword">int</span> money)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(money)&#123;</span><br><span class="line"><span class="comment">//ä¸è¶³ä¸€æ¯›ç»™ä¸€æ¯›</span></span><br><span class="line"><span class="keyword">if</span> (money &lt;= <span class="number">10</span>)</span><br><span class="line">&#123;</span><br><span class="line">num[<span class="number">9</span>]++;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"ä¸è¶³ä¸€æ¯›ç»™ä¸€æ¯›\n"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è´ªå©ªæ³•æ¯æ¬¡éƒ½å¯»æ‰¾å½“å‰æœ€ä¼˜è§£ï¼Œè¿™é‡Œå°±æ˜¯å¯»æ‰¾å°äºmoneyçš„æœ€å¤§é’±å¸å¤§å°</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (cash[i] &lt;= money)</span><br><span class="line">&#123;</span><br><span class="line">money -= cash[i];</span><br><span class="line">num[i]++;</span><br><span class="line"><span class="comment">//å¯¹è¯¥å¤§å°çš„é’±å¸å†æ¬¡ç¡®è®¤æ˜¯å¦å¯ç”¨</span></span><br><span class="line">i--;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">double</span> money;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"è¯·è¾“å…¥éœ€è¦åˆ†é’±çš„æ€»é’±æ•°\n"</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%lf"</span>, &amp;money);</span><br><span class="line">exchange((<span class="keyword">int</span>)(money*<span class="number">100</span>));</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">10</span>; ++i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%6.2lfå…ƒ|%då¼ \n"</span>, cash[i]/<span class="number">100.0</span>, num[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·è¾“å…¥éœ€è¦åˆ†é’±çš„æ€»é’±æ•°</span></span><br><span class="line"><span class="comment">// 68.9</span></span><br><span class="line"><span class="comment">// 100.00å…ƒ|0å¼ </span></span><br><span class="line"><span class="comment">//  50.00å…ƒ|1å¼ </span></span><br><span class="line"><span class="comment">//  10.00å…ƒ|1å¼ </span></span><br><span class="line"><span class="comment">//   5.00å…ƒ|1å¼ </span></span><br><span class="line"><span class="comment">//   2.00å…ƒ|1å¼ </span></span><br><span class="line"><span class="comment">//   1.00å…ƒ|1å¼ </span></span><br><span class="line"><span class="comment">//   0.50å…ƒ|1å¼ </span></span><br><span class="line"><span class="comment">//   0.20å…ƒ|2å¼ </span></span><br><span class="line"><span class="comment">//   0.10å…ƒ|0å¼ </span></span><br></pre></td></tr></table></figure><p>å€¼å¾—ä¸€æçš„æ˜¯â€¦è¿™ä¸ªé¢˜åˆšåšæ—¶æ²¡æœ‰æ„è¯†åˆ°<code>Double</code>çš„è¯¯å·®â€¦ç»“æœæŠ¥é“ä¸Šå‡ºç°äº†åå·®åºŸäº†ä¸å°‘æ—¶é—´..QAQè‹¦æ¶©</p><h2 id="è¯•æ¢ç®—æ³•ï¼ˆå›æº¯æ³•ï¼‰"><a href="#è¯•æ¢ç®—æ³•ï¼ˆå›æº¯æ³•ï¼‰" class="headerlink" title="è¯•æ¢ç®—æ³•ï¼ˆå›æº¯æ³•ï¼‰"></a>è¯•æ¢ç®—æ³•ï¼ˆå›æº¯æ³•ï¼‰</h2><blockquote><p>å…ˆé€‰æ‹©æŸä¸€ç§å¯èƒ½çš„æƒ…å†µè¿›è¡Œè¯•æ¢ï¼Œåœ¨è¯•æ¢è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‘ç°æ­¤é€‰æ‹©çš„å‡è®¾æ˜¯é”™è¯¯çš„ï¼Œå°±é€€å›ä¸€æ­¥é‡æ–°é€‰æ‹©ï¼Œç»§ç»­å‘å‰è¯•æ¢ï¼Œå¦‚æ­¤åå¤è¿›è¡Œï¼Œç›´åˆ°è¯æ˜è§£æˆ–è€…æ— è§£ã€‚</p></blockquote><h4 id="å®ä¾‹-6"><a href="#å®ä¾‹-6" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><p>ç”Ÿæˆå·ç ç»„åˆã€‚å‡è®¾æœ‰ä¸€ç§å½©ç¥¨ï¼Œæ¯æ³¨ç”±nä¸ª1~mçš„æ•°å­—ç»„æˆï¼Œä¸”è¿™nä¸ªæ•°å­—ä¸èƒ½é‡å¤ï¼Œç¼–å†™ç¨‹åºç”Ÿæˆæ‰€æœ‰å·ç çš„ç»„åˆ</p><h4 id="æ€è·¯åˆ†æ-amp-å®ç°ä»£ç -6"><a href="#æ€è·¯åˆ†æ-amp-å®ç°ä»£ç -6" class="headerlink" title="æ€è·¯åˆ†æ&amp;å®ç°ä»£ç "></a>æ€è·¯åˆ†æ&amp;å®ç°ä»£ç </h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯ç”¨çš„æ•°å­—0-29</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> C_NUM 29</span></span><br><span class="line"><span class="comment">//ç”Ÿæˆçš„æ•°å­—ä¸ªæ•°</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> R_NUM 7</span></span><br><span class="line"><span class="comment">//æ ‡è®°å·²ç»ä½¿ç”¨è¿‡çš„æ•°å­—</span></span><br><span class="line"><span class="keyword">int</span> used[C_NUM + <span class="number">1</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="comment">//å‚¨å­˜ç”Ÿæˆçš„ç»“æœ</span></span><br><span class="line"><span class="keyword">int</span> reason[R_NUM + <span class="number">1</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="comment">//remain:è¿˜éœ€è¦ç”Ÿæˆå‡ æ¬¡</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">combine</span><span class="params">(<span class="keyword">int</span> remain)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (remain)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> temp = rand()%C_NUM + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (used[temp])</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//ç”Ÿæˆé‡å¤å°±å†æ¥ä¸€æ¬¡</span></span><br><span class="line">combine(remain);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">used[temp]++;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d \t"</span>, temp);</span><br><span class="line">remain--;</span><br><span class="line">combine(remain);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">combine(R_NUM);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 17 25 24 13 3 28 1</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;a href=&quot;#å†™åœ¨å‰é¢&quot; class=&quot;headerlink&quot; title=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;/a&gt;å†™åœ¨å‰é¢&lt;/h2&gt;&lt;p&gt;ä»¥åä¼šé™†é™†ç»­ç»­å†™ä¸€äº›å…³äºç®—æ³•çš„ç¬”è®°ï¼Œæ¬¢è¿äº¤æµå­¦ä¹ &lt;/p&gt;
&lt;p&gt;å­¦ä¹ è§†é¢‘&lt;a href=&quot;https://bt.byr.cn
      
    
    </summary>
    
      <category term="note" scheme="https://ratdis.github.io/categories/note/"/>
    
    
      <category term="c" scheme="https://ratdis.github.io/tags/c/"/>
    
      <category term="algorithm" scheme="https://ratdis.github.io/tags/algorithm/"/>
    
      <category term="learning" scheme="https://ratdis.github.io/tags/learning/"/>
    
  </entry>
  
  <entry>
    <title>Androidè½¯ä»¶æ•°æ®å¤‡ä»½ä»¥åŠç®¡ç†ä¼˜åŒ–</title>
    <link href="https://ratdis.github.io/2018/11/18/android-backup-and-management/"/>
    <id>https://ratdis.github.io/2018/11/18/android-backup-and-management/</id>
    <published>2018-11-18T09:17:17.000Z</published>
    <updated>2019-03-26T14:31:31.720Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>æœ€è¿‘æœ‰äº›åŠ›ä¸ä»å¿ƒï¼Œé‡è£…macOSååˆå¾—é‡è£…Android(æœ€è¿‘Sonyç»ˆäºå’•å’•å’•çš„æ›´æ–°äº†å®‰å“P)ï¼ŒæœåŠ¡å™¨ä¹Ÿéƒ½é‡è£…ï¼Œä¸ºå•¥é‡è£…å‘¢â€¦å› ä¸ºæœ‰ç‚¹ç³»ç»Ÿæ´ç™–ï¼Œè¿™ç¯‡æ–‡ç« ä¸‹æˆ‘æ€»ç»“ä¸‹å®‰å“é‡è£…åçš„ä¸€äº›æ“ä½œï¼Œä¼šæ¶‰åŠåˆ°åˆ·æœºå‰çš„å¤‡ä»½å‡†å¤‡ä»¥åŠåˆ·æœºåç³»ç»Ÿçš„ç®¡ç†ä¼˜åŒ–ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p><blockquote><p>ä¸‹é¢çš„å¤§éƒ¨åˆ†æ“ä½œéœ€è¦root</p></blockquote><h2 id="å¤‡ä»½"><a href="#å¤‡ä»½" class="headerlink" title="å¤‡ä»½"></a>å¤‡ä»½</h2><p>å¤‡ä»½æ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼Œå³ä½¿ä¸åˆ·æœºå®šæ—¶å¤‡ä»½ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ï¼Œå¤‡ä»½ä¸€èˆ¬åŒ…æ‹¬Appå’ŒAppçš„æ•°æ®ï¼ŒçŸ­ä¿¡è”ç³»äººï¼Œå„ç§ç³»ç»Ÿè®¾ç½®ä¹‹ç±»çš„ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åªè€ƒè™‘å¤‡ä»½Appå’ŒAppçš„æ•°æ®çš„æƒ…å†µ</p><p>åœ¨å¤‡ä»½ä¹‹å‰æˆ‘ä»¬å…ˆå¯¹å®‰å“ä¸‹è½¯ä»¶æ•°æ®è¿›è¡Œäº†è§£</p><h3 id="å¤‡ä»½åŸç†"><a href="#å¤‡ä»½åŸç†" class="headerlink" title="å¤‡ä»½åŸç†"></a>å¤‡ä»½åŸç†</h3><p>åœ¨Androidä¸­çš„APKæ˜¯<code>Android Package</code>çš„ç¼©å†™ï¼Œå³Androidå®‰è£…åŒ…ï¼Œå…¶å®å°±æ˜¯ä¸€ç§å‹ç¼©æ–‡ä»¶ï¼Œå®‰è£…è½¯ä»¶æ—¶ä¼šè‡ªåŠ¨æŠŠAPKç§»åŠ¨åˆ°<code>/data/app/</code>ä¸‹ï¼Œè§£å‹å¹¶æŠŠdexæ–‡ä»¶ä¿å­˜åˆ°<code>/data/dalvik-cache/</code>ç›®å½•ï¼Œæ¥ç€åœ¨<code>/data/data/</code>ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„åº”ç”¨æ•°æ®ç›®å½•</p><p><code>/data/app/</code>è¿™ä¸ªç›®å½•ä¸‹éƒ½æ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼Œè€Œç³»ç»Ÿè½¯ä»¶çš„APKå­˜å‚¨åœ¨äº†<code>/system/app/</code>ä¸‹</p><p>æä¸‹<code>/system/app/</code> å’Œ<code>/data/app/</code>çš„åŒºåˆ«</p><ul><li><code>/data/app/</code>ä¸‹çš„ æ™®é€šç”¨æˆ·å¯ä»¥å¸è½½ï¼Œ<code>/system/app/</code>ä¸‹çš„ åªèƒ½ root ååˆ é™¤</li><li><code>/data/app/</code>ä¸‹çš„è½¯ä»¶å³ä½¿é™é»˜ä¹Ÿå¯ä»¥æ”¶åˆ°å„ç§å¹¿æ’­ä¿¡æ¯ï¼Œ<code>/system/app/</code>ä¸‹çš„å°±ä¸èƒ½</li></ul><p>è½¯ä»¶çš„ç§æœ‰æ•°æ®å¤§éƒ¨åˆ†éƒ½å­˜æ”¾åœ¨<code>/data/data/</code>å’Œ<code>/storage/emulated/0/Android/data/</code>ä¸‹ï¼Œé™¤äº†è¿™ä¸¤ä¸ªæœ‰äº›å¤§å‹æ¸¸æˆå¾€å¾€è¿˜ä¼šæœ‰ä¸ª<code>/storage/emulated/0/Android/obb/</code>ï¼ŒOBBæ–‡ä»¶(Opaque Binary Blob)æ˜¯å®‰å“æ¸¸æˆé€šç”¨æ•°æ®åŒ…ï¼Œå­˜çš„éƒ½æ˜¯æ¸¸æˆä¸­æ‰€ç”¨åˆ°çš„èµ„æºï¼Œå¯¹äºæœ‰äº›æ¸¸æˆä¼šå°†OBBè§£åŒ…<code>/storage/emulated/0/Android/data/</code>ç›®å½•ä¸‹ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç›´æ¥è¯»å–ä¸è§£åŒ…çš„</p><h3 id="å¼€å§‹å¤‡ä»½"><a href="#å¼€å§‹å¤‡ä»½" class="headerlink" title="å¼€å§‹å¤‡ä»½"></a>å¼€å§‹å¤‡ä»½</h3><p>æœ‰äº†ä»¥ä¸Šçš„çŸ¥è¯†èƒŒæ™¯åæˆ‘ä»¬å°±å¯ä»¥æ‰‹åŠ¨å¯¹åº”ç”¨è¿›è¡Œå¤‡ä»½äº†ï¼Œä¸è¿‡è¿™æ ·ä¸å¤Ÿä¼˜é›…ï¼Œæ‰‹åŠ¨å¤åˆ¶æ‰“åŒ…ç§»åŠ¨è¿™äº›æ“ä½œæ—©å°±æœ‰äº†å¾ˆå¤šè‡ªåŠ¨åŒ–çš„è½¯ä»¶äº†</p><p><del>åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨é’›å¤‡ä»½è¿›è¡Œå„ç§å¤‡ä»½å’Œè¿˜åŸæ“ä½œ</del></p><p><del>å…·ä½“çš„è½¯ä»¶æ“ä½œå°±ä¸å¤šè¯´äº†ï¼Œè™½ç„¶ç•Œé¢ä¸‡å¹´ä¸å˜ä½†æ˜¯è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“ä¸Šæ‰‹çš„</del></p><p><del>æ¥ç€åˆ†æé’›å¤‡ä»½ç”Ÿæˆçš„å¤‡ä»½æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°å½“å¤‡ä»½ä¸€ä¸ªAppä»¥åŠæ•°æ®åä¼šç”Ÿæˆä¸‰ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ–‡ä»¶ä»¥<code>.properties</code>ç»“å°¾ï¼Œé‡Œé¢è®°å½•äº†ä¸€äº›å¤‡ä»½çš„ç³»ç»Ÿç¯å¢ƒå’Œå¤‡ä»½è½¯ä»¶çš„ç‰ˆæœ¬å·ä¹‹ç±»çš„ä¿¡æ¯ï¼Œç»™ä»¥åè¿˜åŸåŠ è½½éªŒè¯ç”¨çš„ï¼Œå¦å¤–ä¸¤ä¸ªéƒ½æ˜¯<code>gz</code>æ ¼å¼çš„å‹ç¼©åŒ…ï¼Œå…¶ä¸­ä¸€ä¸ªä¸­å«æœ‰APKï¼Œå¦ä¸€ä¸ªé‡Œé¢è¿˜æ˜¯ä¸ªå‹ç¼©åŒ…ï¼Œå‹ç¼©ç€è¯¥è½¯ä»¶çš„å„ç§æ•°æ®ï¼Œå°±æ˜¯ä¸Šæ–‡æ‰€æåŠåˆ°çš„<code>/data/å„ç§æ–‡ä»¶</code>ï¼Œé’›å¤‡ä»½é»˜è®¤ä¸å¤‡ä»½è½¯ä»¶çš„ç¼“å­˜æ–‡ä»¶ï¼Œé€šè¿‡æµ‹è¯•å‘ç°é’›å¤‡ä»½è¿˜ä¸ä¼šå¤‡ä»½obbæ–‡ä»¶ï¼Œè¿˜å¾—éœ€è¦æ‰‹åŠ¨å¤‡ä»½ä¸€ä¸‹ï¼Œä¸è¿‡é—®é¢˜ä¸å¤§ï¼Œæ¯•ç«Ÿç”¨å¾—åˆ°obbçš„è¿˜æ˜¯å°‘æ•°è½¯ä»¶ï¼Œåœ¨ä¸“ä¸šç‰ˆä¸­å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ä¸€é”®å¤‡ä»½å’Œè¿˜åŸæ‰€æœ‰ï¼Œè®¡åˆ’å¤‡ä»½ï¼Œæ”¯æŒå„ç§å›½å¤–äº‘å¤‡ä»½ä»¥åŠåŠ å¯†ä¹Ÿæ˜¯ä¸é”™çš„ï¼Œå¯ä»¥è¯´æ˜¯ç‘•ä¸æ©ç‘œäº†</del></p><p><del>è‡³äºå¤‡ä»½è”ç³»äººçŸ­ä¿¡ä¹‹ç±»çš„â€¦</del></p><p>åœ¨æˆ‘ä½¿ç”¨è¿‡<code>Swift Backup</code>åï¼Œæˆ‘åªèƒ½è¯´å¥â€œçœŸé¦™â€</p><p>åŒæ ·æ”¯æŒProç‰ˆè®¡åˆ’å¤‡ä»½ï¼Œä¸€é”®å¤‡ä»½å’Œè¿˜åŸï¼Œæœ€é‡è¦çš„æ˜¯æ”¯æŒobbÂ·çŸ­ä¿¡Â·é€šè¯Â·è”ç³»äººå¤‡ä»½ï¼ï¼ï¼Œè™½ç„¶ä»…æ”¯æŒGoogle Driveäº‘å¤‡ä»½ï¼Œä½†æ˜¯å…‰æ˜¯ç•Œé¢å°±ä¸çŸ¥é“æ¯”é’›å¤‡ä»½é«˜åˆ°å“ªé‡Œå»äº†ï¼Œä¸€å¹´è®¢é˜…Pro1.99åˆ€ï¼Œ5.99åˆ€ä¹°æ–­ï¼Œè¿˜æ˜¯å¾ˆåˆ’ç®—çš„</p><p>å¤‡ä»½æ–‡ä»¶åˆ†æçš„è¯ï¼Œè½¯ä»¶æ•°æ®å¤‡ä»½åï¼Œä¼šæœ‰ä¸€ä¸ª<code>.app</code>ç»“å°¾çš„æ–‡ä»¶ï¼Œåç¼€æ”¹æˆapkå°±æ˜¯å®‰è£…åŒ…ï¼Œä»¥<code>.dat</code>ç»“å°¾çš„æ”¹æˆzipï¼Œé‡Œé¢å‹ç¼©çš„å°±æ˜¯ä¸Šæ–‡æåŠåˆ°çš„å„ç§è½¯ä»¶æ•°æ®æ–‡ä»¶å¤¹(/data/ä¸‹çš„)ï¼Œä»¥<code>.extdat</code>ç»“å°¾çš„å‹ç¼©çš„æ˜¯<code>/storage/emulated/0/Android/data/</code>ä¸‹çš„ï¼Œä»¥<code>.exp</code>ç»“å°¾çš„æ˜¯obbæ–‡ä»¶ï¼Œåªæ˜¯æ”¹äº†ä¸ªåå­—ï¼Œå¤§å°æ²¡å˜ï¼Œå¦å¤–è¿˜ä¼šç”Ÿæˆä¸€ä¸ª<code>.xml</code>çš„æ–‡ä»¶ï¼Œå†…å®¹ç»è¿‡ä¸€äº›å¤„ç†ï¼Œä¸å‡ºæ„æ–™å’Œé’›å¤‡ä»½ä¸­çš„.<code>properties</code>æ–‡ä»¶ä½œç”¨å·®ä¸å¤šï¼Œå¦‚æœæˆ‘ä»¬åœ¨è®¾ç½®ä¸­è®¾ç½®äº†å¤‡ä»½åŠ å¯†çš„è¯ï¼Œå¯†åŒ™å¯èƒ½å°±æ˜¯å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­</p><p>è‡³äºå¤‡ä»½é€šè®¯å½•å’ŒçŸ­ä¿¡ä¹‹ç±»çš„æ–‡ä»¶æ¶‰åŠåˆ°æ•°æ®åº“ä¹‹ç±»çš„ï¼ŒæŠ€æœ¯å—é™è¿™é‡Œå°±ä¸åšåˆ†æäº†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å°è¯•ä¸‹</p><p>å¤‡ä»½å·¥ä½œåšå¥½å°±å¯ä»¥å¼ºåˆ·å›ºä»¶äº†(Sony)ï¼Œä¸€èˆ¬æ‰‹æœºéƒ½æ˜¯Recoveryä¸‹å¡åˆ·ROMåŒ…çš„ï¼Œå…·ä½“æµç¨‹Googleä¸€ä¸‹å„è‡ªæ‰‹æœºå‹å·åˆ·æœºæ•™ç¨‹å³å¯</p><h2 id="ç®¡ç†ä¼˜åŒ–"><a href="#ç®¡ç†ä¼˜åŒ–" class="headerlink" title="ç®¡ç†ä¼˜åŒ–"></a>ç®¡ç†ä¼˜åŒ–</h2><p>ç”±äºAndroidçš„å¼€æ”¾ï¼Œç»™äº†ä¸€äº›è½¯ä»¶æ»¥ç”¨æƒé™å¯ä¹˜ä¹‹æœºï¼Œä¸ºäº†ä¿æŠ¤ä¸ªäººéšç§å’Œæ‰‹æœºçš„æµç•…ï¼Œå¿…é¡»é‡‡å–ä¸€äº›æªæ–½å¯¹ä»˜äº†</p><h3 id="ç®¡ç†å·¥å…·è½¯ä»¶"><a href="#ç®¡ç†å·¥å…·è½¯ä»¶" class="headerlink" title="ç®¡ç†å·¥å…·è½¯ä»¶"></a>ç®¡ç†å·¥å…·è½¯ä»¶</h3><p>å»ºè®®å…ˆä¸‹ä¸€ä¸ªç±»ä¼¼äº<code>Appops</code>çš„æƒé™ç®¡ç†è½¯ä»¶ä»¥åŠ<code>é»‘é˜€</code>ç®¡ç†åå°å†å®‰è£…å„ç±»è½¯ä»¶ï¼Œå®‰è£…ä¸€ä¸ªç®¡ç†ä¸€ä¸ª</p><p>å¦‚æœä½ çš„æ‰‹æœºèƒ½åˆ·Xposedæ¡†æ¶çš„è¯(æ¨èåˆ·Magiskä¸­çš„Systemlessçš„Xposed)ï¼Œæœ‰å¾ˆå¤šæ¨¡å—éƒ½å¾ˆå¥½ç”¨ï¼Œç”±äºæˆ‘æ‰‹æœºç”¨çš„å®˜æ–¹å›ºä»¶æ²¡æ³•åˆ·è¿›Xposedâ€¦æ‰€ä»¥ä½ æ‡‚æˆ‘æ„æ€8</p><p>é‚£å°±å†™ç‚¹å„ç±»è½¯ä»¶æ¨è</p><ul><li><p>Appops    ç®¡ç†è½¯ä»¶çš„å„ç§æƒé™ï¼Œå¯å¯¹ä»˜é‚£ç§ä¸ç»™æƒé™å°±ä¸è®©ç”¨çš„æµæ°“ï¼Œä½†æ”¯ä»˜å®çš„SDå¡è¯»å–æƒé™å‹ä¸ä½ï¼Œä»å¯ä»¥è¯»å–ï¼Œç›®å‰æ— è§£ï¼Œå¤§éƒ¨åˆ†è½¯ä»¶è¿˜æ˜¯å¾ˆç®¡ç”¨çš„</p></li><li><p>Brevent(é»‘é˜€)    ç®¡ç†è½¯ä»¶åå°çš„è½¯ä»¶ï¼Œå¾ˆç®¡ç”¨å°±æ˜¯äº†</p></li><li><p>SD Maid &amp; Dir   éƒ½æ˜¯æ¸…ç†è½¯ä»¶çš„ï¼Œå‰è€…çš„è¯ä¸ªäººè¿˜ç”¨å®ƒæ¥å¸è½½å’Œç®¡ç†è‡ªå¯æƒé™ï¼Œåè€…çš„å¯¹å›½å†…æµæ°“æ–‡ä»¶å¾ˆæ£’</p></li><li><p>Airfrozen(ç©ºè°ƒç‹—)   å†»ç»“æµæ°“å’Œä¸å¸¸ç”¨è½¯ä»¶çš„ï¼Œè¿™ç±»è½¯ä»¶å¾ˆå¤šï¼Œåªæ˜¯æˆ‘ä¸€ç›´éƒ½æ˜¯ç”¨çš„è¿™ä¸ªå°±æ˜¯äº†</p><p>Playä¸Šéƒ½å¯ä»¥ä¸‹åˆ°ï¼Œç®¡ç†è½¯ä»¶å°±å·®ä¸å¤šè¿™äº›äº†</p></li></ul><h3 id="ä½¿ç”¨IFWç®¡ç†ç¼“å­˜æ´»åŠ¨å”¤é†’"><a href="#ä½¿ç”¨IFWç®¡ç†ç¼“å­˜æ´»åŠ¨å”¤é†’" class="headerlink" title="ä½¿ç”¨IFWç®¡ç†ç¼“å­˜æ´»åŠ¨å”¤é†’"></a>ä½¿ç”¨IFWç®¡ç†ç¼“å­˜æ´»åŠ¨å”¤é†’</h3><p>é™¤å¼€ä»¥ä¸Šæåˆ°çš„å·¥å…·ï¼Œè¿˜å€¼å¾—ä¸€æçš„æ˜¯æ˜¯IFW(<code>Intent Firewall</code>)è¿™ä¸ªç©æ„</p><p>è¿™æ˜¯ä¸€ä¸ªèµ·åˆ°è¿‡æ»¤åˆ°Intentçš„ä¸œè¥¿ï¼Œåœ¨Androidä¸­è½¯ä»¶éƒ½æ˜¯ä½¿ç”¨Intentè¿™ä¸ªç©æ„å¯åŠ¨æ–°æ´»åŠ¨ã€æ–°æœåŠ¡ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¥é˜»æ­¢ä¸€äº›å¹¶ä¸éœ€è¦çš„ä¸œè¥¿å¼€å¯</p><p>ç³»ç»Ÿæ˜¯è¯»å–<code>/data/system/ifw/</code>ä¸‹çš„xmlæ¥è¿‡æ»¤æ‰Intent(å…è®¸å¤šä¸ªæ–‡ä»¶ï¼Œå¯å åŠ )ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±ç¼–å†™xmlè¿›è¡Œè¿‡æ»¤ï¼Œå…·ä½“æ€ä¹ˆå†™ï¼Œå¯ä»¥å‚è€ƒ<a href="https://selinuxproject.org/page/NB_SEforAndroid_2#ifw.xml" target="_blank" rel="noopener">è¿™é‡Œ</a>ï¼Œ<del>è‡ªå·±å†™æ˜¯ä¸å¯èƒ½çš„ï¼Œè¿™è¾ˆå­éƒ½ä¸å¯èƒ½çš„ï¼ˆé€ƒ</del>    å¯ä»¥ç›´æ¥ä½¿ç”¨å·²ç»å†™å¥½çš„xmlæ–‡ä»¶<a href="https://github.com/apkjam/IFW" target="_blank" rel="noopener">Github</a> ï¼Œå¤åˆ¶åˆ°<code>/data/system/ifw/</code>ä¸‹ï¼Œxmlæ”¹æˆ644æƒé™ï¼Œæ— éœ€é‡å¯å³åˆ»ç”Ÿæ•ˆ</p><p>ä½†æ˜¯æœ‰äº›æµæ°“ä¼šæ£€æŸ¥è‡ªå·±ç”³è¯·çš„æœåŠ¡æœ‰æ²¡æœ‰æ­£å¸¸å¼€å¯ï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šä¸€ç›´å‘é€è¯·æ±‚ï¼Œåè€Œä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—å’Œè®¾å¤‡è€—ç”µé‡çš„å¢åŠ â€¦å°±å¾ˆå°´å°¬</p><p>å°±æˆ‘æ—¥å¸¸ä½¿ç”¨å¸¦æ¥çš„æ•ˆæœè¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œè¯¸å¦‚å¾®ä¿¡è¿™ç§ä¸å¾—ä¸çš„åå°ç¼“å­˜ä½äº†ä¸å°‘</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“?!"></a>æ€»ç»“?!</h2><p>ç°åœ¨æ‰‹æœºæ€§èƒ½æ™®éè¿‡å‰©ï¼Œåœ¨æˆ‘çœ‹æ¥è¿ç”¨ä»¥ä¸Šçš„æ–¹æ³•ç®¡ç†å¥½å·²ç»å¤Ÿç”¨ï¼Œæœ€é‡è¦çš„è¿˜æ˜¯ä¿æŒè‰¯å¥½çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œå®šæ—¶æ¸…ç†ä¸‹åƒåœ¾ï¼Œè¿œç¦»å›½å†…å‡ å¤§æµæ°“å‚ï¼Œèƒ½ç”¨æµè§ˆå™¨å¿«æ·è§£å†³çš„ç»ä¸ä¸‹ä¸ªè½¯ä»¶ï¼Œå³ä½¿è¦ä¸‹ä¹Ÿå»Playä¸Šä¸‹</p><p>æ„¿å›½å†…å®‰å“ç”Ÿæ€ç¯å¢ƒæ—©æ—¥è½¬å¥½ï¼Œè™½ç„¶ä¸æŠ±ä»€ä¹ˆå¸Œæœ›å°±æ˜¯äº†</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;a href=&quot;#å†™åœ¨å‰é¢&quot; class=&quot;headerlink&quot; title=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;/a&gt;å†™åœ¨å‰é¢&lt;/h2&gt;&lt;p&gt;æœ€è¿‘æœ‰äº›åŠ›ä¸ä»å¿ƒï¼Œé‡è£…macOSååˆå¾—é‡è£…Android(æœ€è¿‘Sonyç»ˆäºå’•å’•å’•çš„æ›´æ–°äº†å®‰å“P)ï¼ŒæœåŠ¡å™¨ä¹Ÿéƒ½é‡è£…ï¼Œä¸ºå•¥é‡è£…å‘¢
      
    
    </summary>
    
      <category term="system" scheme="https://ratdis.github.io/categories/system/"/>
    
    
      <category term="backup" scheme="https://ratdis.github.io/tags/backup/"/>
    
      <category term="android" scheme="https://ratdis.github.io/tags/android/"/>
    
      <category term="management" scheme="https://ratdis.github.io/tags/management/"/>
    
  </entry>
  
</feed>
